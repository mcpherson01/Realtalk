!function(){function e(e){return document.getElementById(e)}function r(e){for(var r,a=e.target.files||e.dataTransfer.files,i=0;r=a[i];i++){var n=jQuery(this).attr("data-val");t(r,n)}}function a(e){for(var r,a=e.target.files||e.dataTransfer.files,t=0;r=a[t];t++){var n=jQuery(this).attr("data-val");i(r,n)}}function i(e,r){var a=e.name,i=a.lastIndexOf("."),i=a.substring(i+1);if("csv"!=i.toLowerCase())return alert("Please upload csv files only"),!1;jQuery(".arf_preset_field_content_wrapper_"+r).find("button.btn_2").css("opacity","0.5");var t=new XMLHttpRequest,n=(new Date).getTime(),l=e.name.lastIndexOf("."),s=e.name.substring(l+1),o=/.*(?=\.)/.exec(e.name),_=n+"_"+o;fname=_.replace(/[^\w\s]/gi,"").replace(/ /g,"")+"."+s;var d=jQuery(".arf_ajax_url").val();t.open("POST",d,!0),t.setRequestHeader("X_FILENAME",fname),t.setRequestHeader("X-FILENAME",fname);var f=new FormData;f.append("action","arf_add_new_preset"),f.append("preset_file",e),t.send(f),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){jQuery(".arf_preset_field_content_wrapper_"+r).find("button.btn_2").css("opacity","");var e=t.responseText;jQuery("#arf_preset_data_"+r).attr("db_file_name",e)}}}function t(e,r){if(e.type.indexOf("image")<0)return jQuery('[data-val="'+r+'"]').val(""),alert("Please upload image files only"),!1;if("undefined"!=typeof r){var a="";a=r.split("_radio_label_image_");var i=jQuery('[data-id="arfmainformurl"]').val(),t=i+"/images/ajax-loader1.gif";if("arf_add_radio"==a[0]&&"undefined"!=typeof r){var n="arf_radio_label_image_"+a[1];jQuery("#"+n).html("<img src="+t+' style="float: left; margin: 0 10px 0 0; height: 20px; width: 20px;" />')}}if("form_bg"==r?jQuery("#ajax_form_loader").show():"submit_hover_bg"==r?jQuery("#ajax_submit_hover_loader").show():"submit_btn_img"==r&&jQuery("#ajax_submit_loader").show(),/arf_img_control_image_control/.test(r)&&jQuery(".arf_imagecontrol_loader").css("display","inline-block"),!(location.host.indexOf("sitepointstatic")>=0)){var l=new XMLHttpRequest,s=(new Date).getTime(),o=e.name.lastIndexOf("."),_=e.name.substring(o+1),d=/.*(?=\.)/.exec(e.name),f=s+"_"+d;fname=f.replace(/[^\w\s]/gi,"").replace(/ /g,"")+"."+_;var u=(jQuery('[data-id="arfmainformurl"]').val(),jQuery('[data-id="arffiledragurl"]').val(),document.getElementById("arfajaxurl").value);l.open("POST",u);var m=new FormData;m.append("action","arf_send_form_data_admin"),m.append("files",e),l.setRequestHeader("X_FILENAME",fname),l.setRequestHeader("X-FILENAME",fname),l.send(m),l.onreadystatechange=function(){if(4==l.readyState&&200==l.status){var e=l.responseText,a="",i="",t="";if("undefined"!=typeof r&&(a=r.split("_smiley_image_"),i=r.split("_radio_label_image_"),t=r.split("_image_control_")),"form_bg"==r&&"undefined"!=r){if(document.getElementById("imagename_form").value=e,!jQuery.isFunction(change_form_bg_img))return;change_form_bg_img()}else if("submit_hover_bg"==r&&"undefined"!=r){if(document.getElementById("imagename_submit_hover").value=e,!jQuery.isFunction(change_submit_hover_img))return;change_submit_hover_img()}else if("arf_smiley_add"==a[0]&&"undefined"!=r){var n=a[1]+"_arf_smiley_"+e;document.getElementById("arf_smiley_image_name").value=n,"undefined"!=typeof change_smiley_image&&change_smiley_image()}else if("arf_add_radio"==i[0]&&"undefined"!=typeof r){var n=i[1]+"_arf_radio_image_"+e;if(document.getElementById("arf_radio_image_name").value=n,!jQuery.isFunction(change_radio_image))return;change_radio_image(i[1])}else if("arf_img_control"==t[0]){var n=t[1]+"_image_control_"+e,s=document.getElementById("arfuploadurl").value,o=s+e;document.getElementById("arfimage_url_"+t[1]).value=o,jQuery(".arf_imagecontrol_loader").css("display","none")}else{if(document.getElementById("imagename").value=e,!jQuery.isFunction(change_submit_img))return;change_submit_img()}}}}}window.File&&window.FileList&&window.FileReader,jQuery(document).on("click",".original",function(){var a=e(jQuery(this).attr("id"));a.addEventListener("change",r,!1);var i=new XMLHttpRequest;i.upload}),jQuery(document).on("click",".arf_preset_data",function(){var r=e(jQuery(this).attr("id"));r.addEventListener("change",a,!1);var i=new XMLHttpRequest;i.upload}),jQuery(".iframe_original_btn").click(function(){var e=jQuery('[data-id="arfmainform_bg_img"]').val();if(""!=e)return!1;var r=jQuery(this).attr("data-id").replace("div_","");jQuery("#"+r+"_iframe").contents().find("#fileselect").click();var a=jQuery(this).attr("data-id");jQuery("#arf_field_"+a+"_container").find(".help-block").empty(),jQuery("#progress_"+r).hide();var i=jQuery("#"+r+"_iframe").contents().find("#fileselect").val();if(void 0!==i&&""!=i){var t=jQuery("#file_types_"+r).val();types_arr=t.split(",");var a=jQuery(this).attr("data-id"),n=i.replace(/C:\\fakepath\\/i,""),l=(jQuery(this).attr("data-form-id"),(new Date).getTime()),s=n.lastIndexOf("."),o=n.substring(s+1),_=/.*(?=\.)/.exec(n),d=l+"_"+_,f=d.replace(/[^\w\s]/gi,"").replace(" ","")+"."+o,u=r,m=0,c=(jQuery('[data-id="arfmainformurl"]').val(),jQuery('[data-id="arffiledragurl"]').val()),y="",p=9,v=jQuery(".arf_ajax_url").val(),j="Internet Explorer";"arfmfbi"==r?jQuery("#ajax_form_loader").show():jQuery("#ajax_submit_loader").show(),jQuery("#"+r+"_iframe").contents().find("form").attr("action",v+"?action=arf_send_form_data_admin&frm="+frm_id+"&field_id="+u+"&fname="+f+"&file_type="+y+"&types_arr="+types_arr+"&is_preview="+m+"&ie_version="+p+"&browser="+j),jQuery("#"+r+"_iframe").contents().find("form").submit(),jQuery("#div_"+r).css("margin-top","-4px"),jQuery("#info_"+r).css("display","inline-block"),jQuery("#info_"+r+" #file_name").html(i.replace(/C:\\fakepath\\/i,"")),jQuery("#info_"+r+" .percent").html("").show(),jQuery("#info_"+r+" #percent").html("Uploading..."),jQuery("#progress_"+r+" div.bar").animate({width:"100%"},"slow");var Q=setInterval(function(){jQuery("#"+r+"_iframe").contents()&&jQuery("#"+r+"_iframe").load(function(){var e=jQuery("#"+r+"_iframe").contents()?jQuery("#"+r+"_iframe").contents().find(".uploaded").length:0;if(e>0){if(clearInterval(Q),jQuery("#progress_"+r).removeClass("active"),jQuery("#imagename_form").val(f),jQuery("#form_bg_img_div").css("background","none"),jQuery("#form_bg_img_div").css("border","0px"),jQuery("#form_bg_img_div").css("padding","0px"),jQuery("#form_bg_img_div").css("box-shadow","none"),!jQuery.isFunction(change_form_bg_img))return;change_form_bg_img(),jQuery("#div_"+r).hide(),jQuery("#remove_"+r).css("display","block"),jQuery("#div_"+r).css("margin-top","0px"),jQuery("#remove_"+r).css("margin-top","-4px"),jQuery("#"+r+"_iframe_div").html(" ").append('<iframe id="'+r+'_iframe" src="'+c+'/core/views/iframe.php"></iframe>')}var i=jQuery("#"+r+"_iframe").contents()?jQuery("#"+r+"_iframe").contents().find(".error_upload").length:0;if(i>0){clearInterval(Q);var t=a;if(jQuery('input[name="file'+t+'"]').attr("data-file-valid","false"),"undefined"!=typeof __ARFERR)var n=__ARFERR;else var n="Sorry, this file type is not permitted for security reasons.";if(void 0!==jQuery("#field_"+r).attr("data-invalid-message")&&""!=jQuery("#field_"+r).attr("data-invalid-message"))var l=jQuery("#field_"+r).attr("data-invalid-message");else var l=n;jQuery("#arf_field_"+t+"_container").removeClass("success");var s=jQuery("#arf_field_"+t+"_container .controls"),o=s.parents(".control-group").first(),_=o.find(".help-block").first(),d=s.closest("form").find('[data-id="form_id"]').val(),u="advance"==jQuery('[data-id="form_tooltip_error_'+d+'"]').val()?"advance":"normal";if("advance"==u){if(!jQuery.isFunction(arf_show_tooltip))return;arf_show_tooltip(o,_,l)}else _.length?(_=jQuery("<ul><li>"+l+"</li></ul>"),o.find(".controls .help-block").append(_)):(_=jQuery('<div class="help-block"><ul><li>'+l+"</li></ul></div>"),o.find(".controls").append(_));jQuery("#"+r+"_iframe_div").html(" ").append('<iframe id="'+r+'_iframe" src="'+c+'/core/views/iframe.php"></iframe>')}})},100)}}),jQuery(".iframe_submit_original_btn").click(function(){var e=jQuery("#arfsubmitbuttonimagesetting").val();if(""!=e)return!1;var r=jQuery(this).attr("data-id").replace("div_","");jQuery("#"+r+"_iframe").contents().find("#fileselect").click();var a=jQuery(this).attr("data-id");jQuery("#arf_field_"+a+"_container").find(".help-block").empty();var i=jQuery("#"+r+"_iframe").contents().find("#fileselect").val();if(""!=i&&void 0!==i){var t=jQuery("#file_types_"+r).val();types_arr=t.split(",");var a=jQuery(this).attr("data-id"),n=i.replace(/C:\\fakepath\\/i,""),l=(jQuery(this).attr("data-form-id"),(new Date).getTime()),s=n.lastIndexOf("."),o=n.substring(s+1),_=/.*(?=\.)/.exec(n),d=l+"_"+_,f=d.replace(/[^\w\s]/gi,"").replace(" ","")+"."+o,u=r,m=0,c=(jQuery('[data-id="arfmainformurl"]').val(),jQuery("[data-id='arffiledragurl']").val()),y="",p=9,v=jQuery(".arf_ajax_url").val(),j="Internet Explorer";jQuery("#"+r+"_iframe").contents().find("form").attr("action",v+"?action=arf_send_form_data_admin&frm="+frm_id+"&field_id="+u+"&fname="+f+"&file_type="+y+"&types_arr="+types_arr+"&is_preview="+m+"&ie_version="+p+"&browser="+j),jQuery("#"+r+"_iframe").contents().find("form").submit(),jQuery("#div_"+r).css("margin-top","-4px"),jQuery("#info_"+r).css("display","inline-block"),jQuery("#info_"+r+" #file_name").html(i.replace(/C:\\fakepath\\/i,"")),jQuery("#info_"+r+" .percent").html("").show(),jQuery("#info_"+r+" #percent").html("Uploading..."),jQuery("#progress_"+r+" div.bar").animate({width:"100%"},"slow");var Q=setInterval(function(){jQuery("#"+r+"_iframe").contents()&&jQuery("#"+r+"_iframe").load(function(){var e=jQuery("#"+r+"_iframe").contents().find(".uploaded").length;if(e>0){if(clearInterval(Q),jQuery("#progress_"+r).removeClass("active"),jQuery("#imagename").val(f),jQuery("#submit_btn_img_div").css("background","none"),jQuery("#submit_btn_img_div").css("border","0px"),jQuery("#submit_btn_img_div").css("padding","0px"),jQuery("#submit_btn_img_div").css("box-shadow","none"),!jQuery.isFunction(change_submit_img))return;change_submit_img(),jQuery("#div_"+r).hide(),jQuery("#remove_"+r).css("display","block"),jQuery("#div_"+r).css("margin-top","0px"),jQuery("#remove_"+r).css("margin-top","-4px"),jQuery("#info_"+r+" #percent").html("File Uploaded"),jQuery('input[name="file'+a+'"]').val(_),jQuery('input[name="item_meta['+a+']"]').val(_),jQuery('input[name="file'+a+'"]').attr("data-file-valid","true"),jQuery("#"+r+"_iframe_div").html(" ").append('<iframe id="'+r+'_iframe" src="'+c+'/core/views/iframe.php"></iframe>')}var i=jQuery("#"+r+"_iframe").contents().find(".error_upload").length;if(i>0){clearInterval(Q);var t=a;if(jQuery('input[name="file'+t+'"]').attr("data-file-valid","false"),"undefined"!=typeof __ARFERR)var n=__ARFERR;else var n="Sorry, this file type is not permitted for security reasons.";if(void 0!==jQuery("#field_"+r).attr("data-invalid-message")&&""!=jQuery("#field_"+r).attr("data-invalid-message"))var l=jQuery("#field_"+r).attr("data-invalid-message");else var l=n;jQuery("#arf_field_"+t+"_container").removeClass("success");var s=jQuery("#arf_field_"+t+"_container .controls"),o=s.parents(".control-group").first(),d=o.find(".help-block").first(),u=s.closest("form").find('[data-id="form_id"]').val(),m="advance"==jQuery('[data-id="form_tooltip_error_'+u+'"]').val()?"advance":"normal";if("advance"==m){if(!jQuery.isFunction(arf_show_tooltip))return;arf_show_tooltip(o,d,l)}else d.length?(d=jQuery("<ul><li>"+l+"</li></ul>"),o.find(".controls .help-block").append(d)):(d=jQuery('<div class="help-block"><ul><li>'+l+"</li></ul></div>"),o.find(".controls").append(d));jQuery("#"+r+"_iframe_div").html(" ").append('<iframe id="'+r+'_iframe" src="'+c+'/core/views/iframe.php"></iframe>')}})},100)}}),jQuery(".iframe_submit_hover_original_btn").click(function(){var e=jQuery("#arfsubmithoverbuttonimagesetting").val();if(""!=e)return!1;var r=jQuery(this).attr("data-id").replace("div_","");jQuery("#"+r+"_iframe").contents().find("#fileselect").click();var a=jQuery(this).attr("data-id");jQuery("#arf_field_"+a+"_container").find(".help-block").empty();var i=jQuery("#"+r+"_iframe").contents().find("#fileselect").val();if(""!=i&&void 0!==i){var t=jQuery("#file_types_"+r).val();types_arr=t.split(",");var a=jQuery(this).attr("data-id"),n=i.replace(/C:\\fakepath\\/i,""),l=(jQuery(this).attr("data-form-id"),(new Date).getTime()),s=n.lastIndexOf("."),o=n.substring(s+1),_=/.*(?=\.)/.exec(n),d=l+"_"+_,f=d.replace(/[^\w\s]/gi,"").replace(" ","")+"."+o,u=r,m=0,c=(jQuery('[data-id="arfmainformurl"]').val(),jQuery("[data-id='arffiledragurl']").val()),y="",p=9,v="Internet Explorer",j=jQuery(".arf_ajax_url").val();jQuery("#"+r+"_iframe").contents().find("form").attr("action",j+"?action=arf_send_form_data_admin&frm="+frm_id+"&field_id="+u+"&fname="+f+"&file_type="+y+"&types_arr="+types_arr+"&is_preview="+m+"&ie_version="+p+"&browser="+v),jQuery("#"+r+"_iframe").contents().find("form").submit(),jQuery("#div_"+r).css("margin-top","-4px"),jQuery("#info_"+r).css("display","inline-block"),jQuery("#info_"+r+" #file_name").html(i.replace(/C:\\fakepath\\/i,"")),jQuery("#info_"+r+" .percent").html("").show(),jQuery("#info_"+r+" #percent").html("Uploading..."),jQuery("#progress_"+r+" div.bar").animate({width:"100%"},"slow");var Q=setInterval(function(){jQuery("#"+r+"_iframe").contents()&&jQuery("#"+r+"_iframe").load(function(){var e=jQuery("#"+r+"_iframe").contents().find(".uploaded").length;if(e>0){if(clearInterval(Q),jQuery("#progress_"+r).removeClass("active"),jQuery("#imagename").val(f),jQuery("#submit_hover_btn_img_div").css("background","none"),jQuery("#submit_hover_btn_img_div").css("border","0px"),jQuery("#submit_hover_btn_img_div").css("padding","0px"),jQuery("#submit_hover_btn_img_div").css("box-shadow","none"),!jQuery.isFunction(change_submit_hover_img))return;change_submit_hover_img(),jQuery("#div_"+r).hide(),jQuery("#remove_"+r).css("display","block"),jQuery("#div_"+r).css("margin-top","0px"),jQuery("#remove_"+r).css("margin-top","-4px"),jQuery("#info_"+r+" #percent").html("File Uploaded"),jQuery('input[name="file'+a+'"]').val(_),jQuery('input[name="item_meta['+a+']"]').val(_),jQuery('input[name="file'+a+'"]').attr("data-file-valid","true"),jQuery("#"+r+"_iframe_div").html(" ").append('<iframe id="'+r+'_iframe" src="'+c+'/core/views/iframe.php"></iframe>')}var i=jQuery("#"+r+"_iframe").contents().find(".error_upload").length;if(i>0){clearInterval(Q);var t=a;if(jQuery('input[name="file'+t+'"]').attr("data-file-valid","false"),"undefined"!=typeof __ARFERR)var n=__ARFERR;else var n="Sorry, this file type is not permitted for security reasons.";if(void 0!==jQuery("#field_"+r).attr("data-invalid-message")&&""!=jQuery("#field_"+r).attr("data-invalid-message"))var l=jQuery("#field_"+r).attr("data-invalid-message");else var l=n;jQuery("#arf_field_"+t+"_container").removeClass("success");var s=jQuery("#arf_field_"+t+"_container .controls"),o=s.parents(".control-group").first(),d=o.find(".help-block").first(),u=s.closest("form").find('[data-id="form_id"]').val(),m="advance"==jQuery('[data-id="form_tooltip_error_'+u+'"]').val()?"advance":"normal";if("advance"==m){if(!jQuery.isFunction(arf_show_tooltip))return;arf_show_tooltip(o,d,l)}else d.length?(d=jQuery("<ul><li>"+l+"</li></ul>"),o.find(".controls .help-block").append(d)):(d=jQuery('<div class="help-block"><ul><li>'+l+"</li></ul></div>"),o.find(".controls").append(d));jQuery("#"+r+"_iframe_div").html(" ").append('<iframe id="'+r+'_iframe" src="'+c+'/core/views/iframe.php"></iframe>')}})},100)}})}();