/*Minified*/
(function(b){b.widget("cp.UseyourDrive",{options:{listtoken:null,searchQuery:null},_create:function(){this.element.removeClass("jsdisabled");this.element.show();this.options.topContainer=this.element.parent();this.options.loadingContainer=this.element.find(".loading");this.element.css("width","100%");this.options.listtoken=this.element.attr("data-token");this.options.account_id=this.element.attr("data-account-id");this.cache={};this.uploaded_files=[];this.uploaded_files_storage={};this.number_of_uploaded_files={Max:this.element.find('input[name="maxnumberofuploads"]').val(),Counter:0};this.options.mobile=false;if(/Android|webOS|iPhone|iPod|iPad|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var c=navigator.userAgent.toLowerCase();if((c.search("android")>-1)&&(c.search("mobile")>-1)){this.options.mobile=true}else{if((c.search("android")>-1)&&!(c.search("mobile")>-1)){this.options.mobile=false}else{this.options.mobile=true}}}else{if(this.options.is_mobile==="1"){this.options.mobile=true}}if(this.options.mobile){b("html").addClass("uyd-mobile")}this.recaptcha_passed=false;this._initiate()},_destroy:function(){return this._super()},_setOption:function(c,d){this._super(c,d)},_initiate:function(){var c=this;c.options.topContainer.one("inview",function(e,d){c._initResizeHandler();c._refreshView();c._initCache();if(c.options.recaptcha!==""){c._initReCaptcha()}if(c.options.topContainer.hasClass("files")||c.options.topContainer.hasClass("gallery")||c.options.topContainer.hasClass("search")){c._initFilebrowser()}if(c.element.find(".fileuploadform").length>0){c._initUploadBox()}if(c.options.topContainer.hasClass("video")||c.options.topContainer.hasClass("audio")){c._initMediaPlayer()}});if(c.options.topContainer.hasClass("initiate")){c.options.topContainer.trigger("inview")}window.setTimeout(function(){c.initated=true},2000)},_initFilebrowser:function(){this.renderNavMenu();this._getFileList({})},_initMediaPlayer:function(){var c=this;var d=new Event("init_media_player");c.element[0].dispatchEvent(d)},_initUploadBox:function(){var r=this;var j=r.options.topContainer.hasClass("upload");var s=r.element.find(".fileuploadform");var g=s.closest("form");var q=true;this._initDragDrop();if(r._helperIsIE()!==false&&r._helperIsIE()<10){b(".upload-multiple-files").parent().remove()}if(j&&document.cookie.indexOf("UYD-ID=")==-1){var e=new Date();e.setTime(e.getTime()+(7*24*60*60*1000));var d="; expires="+e.toUTCString();var c=Math.random().toString(36).substr(2,16);document.cookie="UYD-ID="+c+d+"; path="+r.options.cookie_path+"; domain="+r.options.cookie_domain+";"}if(g.length>0){var p=g.find('input[type="submit"]:visible, input[type="button"].gform_next_button:visible, button[id^="gform_submit_button"]:visible, button[class*="cf7md-submit-btn"]:visible');var n=g.find("#wpcp_form_submit");if(n.length===0){n=p.clone().attr("id","wpcp_form_submit").prop("onclick",null).prop("onkeypress",null).off().addClass("wpcf7-submit")}n.click(function(t){if((s.closest(".gfield_contains_required").length)&&(r.number_of_uploaded_files.Counter===0)){s.css("border-color","red");return false}b(this).addClass("firing").prop("disabled",true).fadeTo(400,0.3);if(s.find(".template-upload").length>0){s.css("border-color","");s.trigger("useyourdrive-startupload");b(this).val(r.options.str_processing);return false}if(g.find(".template-upload").length===0&&g.hasClass("submitting")===false){g.addClass("submitting");b(this).remove();p.prop("disabled",false).show().fadeTo(400,0.3).trigger("click").prop("disabled",true);b("html, body").animate({scrollTop:p.offset().top},1500)}})}if(g.length>0&&g.find("#gravityflow_update_button").length===0&&!r.options.topContainer.hasClass("auto_upload")){q=false;if(g.find("#wpcp_form_submit").length===0){n.insertBefore(p);p.prop("disabled",true).hide()}}if(g.length>0&&r.element.find('input[name="fileupload-filelist_'+r.options.listtoken+'"]').val().length>0){r.uploaded_files_storage=JSON.parse(r.element.find('input[name="fileupload-filelist_'+r.options.listtoken+'"]').val());b.each(r.uploaded_files_storage,function(t,u){r._uploadRenderRow(u);r._uploadRenderRowOnFinish(u,true);r.number_of_uploaded_files.Counter++})}r.element.find(".fileupload-filelist").change(function(){r.element.parent().next(".fileupload-input-filelist").val(b(this).val())});r.element.find(".fileupload-filelist").trigger("change");r.element.find(".fileupload-list").click(function(){r.element.find(".upload-input-button:first").trigger("click")});var i=(r.element.find('input[name="encryption"]').val()==="1");var l=b.support.xhrFileUpload&&!i;var k=l&&!(new RegExp("(Opera Mobi)|(Android)").test(window.navigator.userAgent));var h=(l)?false:true;var m=(l)?"PUT":"POST";var f=true;var o=(k)?5*1024*1024:0;if(l&&r.element.find('input[name="maxfilesize"]').attr("data-limit")==="0"){r.element.find('input[name="maxfilesize"]').val("");r.element.find(".fileupload-container").find(".max-file-size").text(r.options.str_uploading_no_limit)}s.fileupload({url:r.options.ajax_url,type:m,maxChunkSize:o,singleFileUploads:f,multipart:h,dataType:"json",autoUpload:q,maxFileSize:(l&&r.element.find('input[name="maxfilesize"]').attr("data-limit")==="0")?"undefined":r.options.post_max_size,acceptFileTypes:new RegExp(r.element.find('input[name="acceptfiletypes"]').val(),"i"),dropZone:r.element,messages:{maxNumberOfFiles:r.options.maxNumberOfFiles,acceptFileTypes:r.options.acceptFileTypes,maxFileSize:r.options.maxFileSize,minFileSize:r.options.minFileSize},limitConcurrentUploads:3,disableImageLoad:true,disableImageResize:true,disableImagePreview:true,disableAudioPreview:true,disableVideoPreview:true,uploadTemplateId:null,downloadTemplateId:null,add:function(u,t){b.each(t.files,function(v,w){r.number_of_uploaded_files.Counter++;w.hash=w.name.hashCode()+"_"+Math.floor(Math.random()*1000000);w.listtoken=r.options.listtoken;if("webkitRelativePath" in w){w.path=w.webkitRelativePath.replace(w.name,"")}else{w.path=""}w=r._uploadValidateFile(w);var x=r._uploadRenderRow(w);if(w.error!==false){s.trigger("useyourdrive-removeupload",[t.files[v]]);t.files.splice(v,1)}x.find(".cancel-upload").on("click",function(y){y.preventDefault();y.stopPropagation();t.files.splice(v,1);r.number_of_uploaded_files.Counter--;r._uploadDeleteRow(w,0);s.trigger("useyourdrive-removeupload",[t.files[v]])})});s.trigger("useyourdrive-addupload",[t]);if(t.autoUpload||(t.autoUpload!==false&&b(this).fileupload("option","autoUpload"))){if(t.files.length>0){t.process().done(function(){r._uploadDoRequest(t)})}}else{b(this).on("useyourdrive-startupload",function(){if(t.files.length>0){t.process().done(function(){r._uploadDoRequest(t)})}})}},submit:function(x,v){window.onbeforeunload=function(){return true};r.element.attr("uploading","true");var u;var t;b.each(v.files,function(y,z){t=z;r._uploadRenderRowOnStart(t);u=t.hash});if(q===false&&r.element.visible(true)===false){b("html, body").stop().animate({scrollTop:r.element.offset().top-200},1000)}if(l){var w=b(this);b.ajax({type:"POST",url:UseyourDrive_vars.ajax_url,data:{action:"useyourdrive-upload-file",account_id:r.options.account_id,type:"get-direct-url",filename:t.name,file_size:t.size,file_path:t.path,mimetype:t.type,orgin:(!window.location.origin)?window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""):window.location.origin,lastFolder:r.element.attr("data-id"),listtoken:r.options.listtoken,_ajax_nonce:r.options.upload_nonce,},error:function(){t.error=r.options.str_error;r._uploadRenderRowOnFinish(t)},success:function(y){if(typeof y.result==="undefined"||typeof y.url==="undefined"){t.error=r.options.str_error;r._uploadRenderRowOnFinish(t)}else{v.url=y.url;t.convert=y.convert;v.jqXHR=w.fileupload("send",v)}},dataType:"json"});return false}else{v.formData={action:"useyourdrive-upload-file",account_id:r.options.account_id,type:"do-upload",hash:t.hash,file_path:t.path,lastFolder:r.element.attr("data-id"),listtoken:r.options.listtoken,_ajax_nonce:r.options.upload_nonce}}}}).on("fileuploadsubmit",function(u,t){}).on("fileuploadprogress",function(w,v){var u=v.files[0];if(l){var t=parseInt(v.loaded/v.total*100,10);r._uploadRenderRowOnProgress(u,{percentage:t,progress:"uploading_to_cloud"})}else{var t=parseInt(v.loaded/v.total*100,10)/2;r._uploadRenderRowOnProgress(u,{percentage:t,progress:"uploading_to_server"});if(t>=50){r._uploadRenderRowOnProgress(u,{percentage:50,progress:"uploading_to_cloud"});setTimeout(function(){r._uploadGetProgress(u)},2000)}}}).on("fileuploadstopped",function(){}).on("fileuploaddone",function(u,t){sendDriveGooglePageView("Upload file")}).on("fileuploadalways",function(v,u){var t=u.files[0];if(u.result===null){t.error=r.options.str_error;r._uploadRenderRowOnFinish(t)}if(l){t.fileid=u.result.id;t.completepath="";t.filesize=r._helperFormatBytes(u.result.size,1);t.link=u.result.webViewLink;if(t.convert){r._uploadDoConvert(t)}else{r._uploadRenderRowOnFinish(t)}}else{if(typeof u.result!=="undefined"){if(typeof u.result.status!=="undefined"){if(u.result.status.progress==="finished"||u.result.status.progress==="failed"){r._uploadRenderRowOnFinish(u.result.file)}}else{u.result.file.error=r.options.str_error;r._uploadRenderRowOnFinish(u.result.file)}}else{t.error=r.options.str_error;r._uploadRenderRowOnFinish(t)}}}).on("fileuploaddrop",function(v,u){var t=b(this);b("html, body").animate({scrollTop:t.offset().top},1500)}).on("useyourdrive-upload-finished",function(t){r.element.attr("uploading","");if(b(".UseyourDrive[uploading=true]").length>0){return}if(g.length>0&&g.find("#gravityflow_update_button").length===0&&!r.options.topContainer.hasClass("auto_upload")){n.trigger("click")}})},_getFileList:function(d){var c=this._buildFileListRequest();this.element.find(".no_results").remove();this.options.loadingContainer.removeClass("initialize upload error").fadeIn(400);this.element.find(".nav-refresh i").addClass("fa-spin");c(d,this.renderBrowserContent,this)},_buildFileListRequest:function(d){var c=this;return this._pipeline({url:c.options.ajax_url,type:"POST",dataType:"json",data:function(e){e.listtoken=c.options.listtoken;e.account_id=c.options.account_id;e.lastFolder=c.element.attr("data-id");e.folderPath=c.element.attr("data-path");e.sort=c.element.attr("data-sort");e.deeplink=c.element.attr("data-deeplink");e.filelayout=c.element.attr("data-layout");e.action="useyourdrive-get-filelist";e._ajax_nonce=c.options.refresh_nonce;e.mobile=c.options.mobile;if(c.element.attr("data-list")==="gallery"){e.action="useyourdrive-get-gallery";e._ajax_nonce=c.options.gallery_nonce}e.query=c.searchQuery;return e}})},_initSearchBox:function(){var c=this;var d=this.element.find(".nav-search");d.qtip({prerender:false,id:"search-"+c.options.listtoken,content:{text:d.next(".search-div"),button:d.next(".search-div").find(".search-remove")},position:{my:"top right",at:"bottom center",target:d,viewport:b(window),adjust:{scroll:false}},style:{classes:"UseyourDrive search "+c.options.content_skin},show:{effect:function(){b(this).fadeTo(90,1,function(){b("input",this).focus()})}},hide:{fixed:true,delay:1500,event:"unfocus"}});c.element.find(".search-input").on("keyup",function(e){c.searchQuery=b(this).val();if(b(this).val().length>0){c.options.loadingContainer.addClass("search");c.element.find(".nav-search").addClass("inuse");clearTimeout(c.updateTimer);c.updateTimer=setTimeout(function(){c.element.find(".loading, .ajax-filelist").show();c._getFileList({})},1000)}else{c.element.find(".nav-search").removeClass("inuse");if(c.element.hasClass("searchlist")){c.element.find(".loading, .ajax-filelist").hide();c.element.find(".ajax-filelist").html("")}}});c.element.find(".submit-search").click(function(){c.searchQuery=b(this).val();if(b(this).val().length>0){clearTimeout(c.updateTimer);c.updateTimer=setTimeout(function(){c.element.find(".loading, .ajax-filelist").show();c._getFileList({})},1000)}else{c.element.find(".loading, .ajax-filelist").hide();c.element.find(".ajax-filelist").html("")}});c.element.find(".search-remove").click(function(){if(b(this).parent().find(".search-input").val()!==""){c.clearSearchBox()}})},clearSearchBox:function(){b('[data-qtip-id="search-'+this.options.listtoken+'"] .search-input').val("").trigger("keyup")},_initGearMenu:function(){var c=this;var d=this.element.find(".nav-gear");d.qtip({prerender:false,id:"nav-"+c.options.listtoken,content:{text:d.next(".gear-menu")},position:{my:"top right",at:"bottom center",target:d,viewport:b(window),adjust:{scroll:false}},style:{classes:"UseyourDrive "+c.options.content_skin},show:{event:"click, mouseenter",solo:true},hide:{event:"mouseleave unfocus",fixed:true,delay:200},events:{show:function(g,e){var f=c._helperReadArrCheckBoxes("[data-token='"+c.options.listtoken+"'] input[name='selected-files[]']");if(f.length===0){e.elements.content.find(".selected-files-to-zip").parent().hide();e.elements.content.find(".all-files-to-zip").parent().show();e.elements.content.find(".selected-files-delete").parent().hide();e.elements.content.find(".selected-files-move").parent().hide()}else{e.elements.content.find(".selected-files-to-zip").parent().show();e.elements.content.find(".all-files-to-zip").parent().hide();e.elements.content.find(".selected-files-delete").parent().show();e.elements.content.find(".selected-files-move").parent().show()}var h=e.elements.content.find("ul > li").not(".gear-menu-no-options").filter(function(){return b(this).css("display")!=="none"});if(h.length>0){e.elements.content.find(".gear-menu-no-options").hide()}else{e.elements.content.find(".gear-menu-no-options").show()}}}});this.element.find(".nav-layout").unbind("click").click(function(){if(c.element.attr("data-layout")==="list"){c.element.attr("data-layout","grid")}else{c.element.attr("data-layout","list")}c._getFileList({})});this.element.find(".select-all-files").unbind("click").click(function(){c.element.find(".selected-files:checkbox").prop("checked",b(this).prop("checked"));if(b(this).prop("checked")===true){c.element.find('.entry:not(".newfolder")').addClass("isselected")}else{c.element.find('.entry:not(".newfolder")').removeClass("isselected")}});this.element.find(".all-files-to-zip, .selected-files-to-zip").unbind("click").click(function(f){var e=[];if(b(f.target).hasClass("all-files-to-zip")){c.element.find(".select-all-files").trigger("click");e=c._helperReadArrCheckBoxes("[data-token='"+c.options.listtoken+"'] input[name='selected-files[]']")}if(b(f.target).hasClass("selected-files-to-zip")){e=c._helperReadArrCheckBoxes("[data-token='"+c.options.listtoken+"'] input[name='selected-files[]']")}var h={action:"useyourdrive-create-zip",account_id:c.options.account_id,listtoken:c.options.listtoken,lastFolder:c.element.attr("data-id"),_ajax_nonce:c.options.createzip_nonce,files:e};var g=b('<div class="processor_icon"><i class="fas fa-cog fa-spin fa-1x fa-fw"></i></div>').css({"margin-right":"5px",display:"inline-grid"});c.element.find(".layout-grid input:checked[name='selected-files[]']").closest(".entry").find(".entry-name-view").prepend(g);c.element.find(".layout-list input:checked[name='selected-files[]']").closest(".entry").find(".entry_name").prepend(g);c.element.find(".processor_icon").delay(5000).fadeOut("slow",function(){b(this).remove()});if(b(f.target).hasClass("all-files-to-zip")){c.element.find(".select-all-files").trigger("click")}b(".qtip").qtip("hide");b(this).attr("href",c.options.ajax_url+"?"+b.param(h));return});c.element.find(".nav-upload").click(function(){b(".qtip").qtip("hide");var f=c.element.find(".fileupload-container");b("html, body").animate({scrollTop:f.offset().top},1500);for(var e=0;e<3;e++){f.find(".fileupload-buttonbar").fadeTo("slow",0.5).fadeTo("slow",1)}});c.element.find(".selected-files-move").click(function(){b(".qtip").qtip("hide");var e=c.element.find("input[name='selected-files[]']:checked");if(e.length===0){return false}c._actionMoveEntries(e)});c.element.find(".selected-files-delete").click(function(){b(".qtip").qtip("hide");var e=c.element.find("input[name='selected-files[]']:checked");if(e.length===0){return false}c._actionDeleteEntries(e)});c.element.find(".entry_action_shortlink_folder").unbind("click").click(function(f){c._actionShareEntry(b(this))})},_initAccountSelector:function(){var c=this;c.element.find(".nav-account-selector").click(function(){c._actionSelectAccount()})},renderBrowserContent:function(c,d){if(d===false){c.element.find(".nav-title").html(c.options.str_no_filelist);c.options.loadingContainer.addClass("error")}else{c.options.loadingContainer.fadeIn(200);c.element.find(".ajax-filelist").html(d.html);c.element.find(".image-collage").hide();c.element.find(".nav-title").html(d.breadcrumb);c.element.find(".current-folder-raw").text(d.rawpath);if(d.lastFolder!==null){c.element.attr("data-id",d.lastFolder)}if(d.folderPath!==null){c.element.attr("data-path",d.folderPath)}}c.element.find(".breadcrumb").one("inview",function(f,e){c.renderBreadCrumb()});c.element.find(".nav-refresh i").removeClass("fa-spin");c.unveilImages();if(c.element.hasClass("gridgallery")){c.renderContentForGallery();c._initLazyLoading()}else{c.renderContentForBrowser()}c.element.find(".ajax-filelist").scroll(function(){clearTimeout(window.scrollUnveilTimer);window.scrollTimer=setTimeout(function(){c.unveilImages()},500)});b("#TB_ajaxContent").scroll(function(){clearTimeout(window.scrollUnveilTimer);window.scrollTimer=setTimeout(function(){c.unveilImages()},500)});c.unveilImages();c.element.find(".entry").unbind("hover").hover(function(){b(this).addClass("hasfocus")},function(){b(this).removeClass("hasfocus")}).on("mouseover",function(){b(this).addClass("hasfocus")}).unbind("click").click(function(){}).on("contextmenu",function(f){return false});c.element.find(".folder, .image-folder").unbind("click").click(function(g){if(b(this).hasClass("isdragged")||b(this).hasClass("newfolder")){return false}g.stopPropagation();c.clearSearchBox();var f={id:b(this).closest(".folder, .image-folder").attr("data-id"),};c._getFileList(f);if(c.element.find(".nav-header").visible(true)===false){b("html, body").stop().animate({scrollTop:c.element.offset().top-200},1000)}});c.element.find(".newfolder").unbind("click").click(function(f){if(typeof c.searchQuery!="undefined"&&c.searchQuery!==""){return false}c._actionCreateEntry(b(this))});c.element.find(".entry_checkbox").unbind("click").click(function(f){f.stopPropagation();return true});c.element.find(".entry_checkbox :checkbox").click(function(f){if(b(this).prop("checked")){b(this).closest(".entry").addClass("isselected")}else{b(this).closest(".entry").removeClass("isselected")}});c._initEditMenu();c._initDescriptionBox();c._initLightbox();c.renderThumbnailsPopup();c._initMove();c._initLinkEvent();c._initScrollToTop();if(typeof grecaptcha!=="undefined"&&c.options.recaptcha!==""&&c.recaptcha_passed===false){c._disableDownloadLinks()}c.options.loadingContainer.fadeOut(300);c.element.trigger("content-loaded",c)},renderContentForBrowser:function(){var c=this;switch(this.element.attr("data-layout")){case"list":c.element.removeClass("uyd-grid").addClass("uyd-list");b(".qtip[data-qtip-id='nav-"+c.options.listtoken+"']").find(".fa-th-large").closest("li").show();c.element.find(".fa-th-large").closest("li").show();b(".qtip[data-qtip-id='nav-"+c.options.listtoken+"']").find(".fa-th-list").closest("li").hide();c.element.find(".fa-th-list").closest("li").hide();break;case"grid":c.element.removeClass("uyd-list").addClass("uyd-grid");b(".qtip[data-qtip-id='nav-"+c.options.listtoken+"']").find(".fa-th-large").closest("li").hide();c.element.find(".fa-th-large").closest("li").hide();b(".qtip[data-qtip-id='nav-"+c.options.listtoken+"']").find(".fa-th-list").closest("li").show();c.element.find(".fa-th-list").closest("li").show();var d=c.element.find(".files.layout-grid");c.fitEntriesInContainer(d.find(".folders-container "),250);c.fitEntriesInContainer(d.find(".files-container "),250);d.fadeTo(0,0).delay(100).fadeTo(200,1);break}},renderContentForGallery:function(){var c=this;var e=c.element.find(".image-container");var f=c.element.find(".image-collage");e.hover(function(){b(this).find(".image-rollover").stop().animate({opacity:1},400)},function(){b(this).find(".image-rollover").stop().animate({opacity:0},400)}).find(".image-rollover").css("opacity","0");f.outerWidth(c.element.find(".ajax-filelist").width()-1,true);var d=c.element.attr("data-targetheight");f.removeWhitespace().collagePlus({targetHeight:d,fadeSpeed:"slow",allowPartialLastRow:true});c.element.find(".image-container.hidden").fadeOut(0);f.fadeTo(200,1);e.each(function(){var g=b(this).find(".folder-thumb");b(this).find(".image-folder-img").width(b(this).width()).height(b(this).height());if(g.length>0){g.width(b(this).width()).height(b(this).height());b(this).find(".image-folder-img").hide()}});if(c.element.find(".loadthumbs").length>0){c.loadImageFoldersThumbs()}c.renderImageFolders()},fitEntriesInContainer:function(f,h){var c=this;var e=f.innerWidth()-1;var d=Math.round(e/h);var g=Math.floor(e/d);f.removeWhitespace();f.find(".entry_block").each(function(){var i=parseInt(b(this).css("padding-left"))+parseInt(b(this).css("padding-right"));b(this).parent().outerWidth(g-i,true)})},loadImageFoldersThumbs:function(){var c=this;var d=c.element.find(".loadthumbs").removeClass("loadthumbs").map(function(){return b(this).data("id")}).get();b.ajax({type:"POST",url:c.options.ajax_url,data:{action:"useyourdrive-thumbnail",account_id:c.options.account_id,type:"folder-thumbnails",listtoken:c.options.listtoken,lastFolder:c.element.attr("data-id"),folderPath:c.element.attr("data-path"),folders:d},success:function(e){b.each(e,function(g,f){if(f===""){return true}var h=c.element.find('[data-id="'+g+'"]');h.find(".folder-thumb").remove();h.find(".image-folder-img").hide().after(f);h.find(".folder-thumb").width(b(h).width()).height(b(h).height()).first().fadeIn(1500);c.element.find(".image-folder .preloading").fadeOut("slow",function(){b(this).remove()})})},dataType:"json"})},renderImageFolders:function(){var c=this;c.element.find(".image-folder").unbind("mousemove").mousemove(function(g){var h=b(this).find(".folder-thumb");var f=g.offsetX/g.currentTarget.offsetWidth;var d=Math.ceil(f*h.length)-1;h.filter(":gt(0)").stop(true).fadeOut().filter(":eq("+d+")").stop(true).fadeIn()});c.element.find(".image-folder").unbind("mouseleave").mouseleave(function(){b(this).find(".folder-thumb:gt(0)").stop(true).fadeOut()})},_initLazyLoading:function(){var c=this;var d=c.element.find(".image-container.entry:not(.hidden):last()");var e=c.element.attr("data-loadimages");d.one("inview",function(h,g){var f=c.element.find(".image-container:hidden:lt("+e+")");if(f.length===0){return}f.fadeIn(500).removeClass("hidden").find("img").removeClass("hidden");c.unveilImages();c._initLazyLoading()})},_initScrollToTop:function(){var c=this;if(c.element.find(".ajax-filelist").length===0){return}c.element.find(".scroll-to-top").unbind("click").click(function(){b("html, body").animate({scrollTop:c.element.offset().top},1500)});b(window).off("scroll",null,c._positionScrollToTop).on("scroll",null,{},c._positionScrollToTop)},_initReCaptcha:function(){var c=this;if(typeof grecaptcha==="undefined"){setTimeout(c._initReCaptcha.bind(c),1000);return false}grecaptcha.ready(function(){grecaptcha.execute(c.options.recaptcha,{action:"wpcloudplugins"}).then(function(d){b.ajax({type:"POST",url:c.options.ajax_url,data:{action:"useyourdrive-check-recaptcha",listtoken:c.options.listtoken,response:d,_ajax_nonce:c.options.recaptcha_nonce},success:function(e){if(typeof e.verified==="undefined"||e.verified!==true){return false}c.recaptcha_passed=true;c._enableDownloadLinks()},dataType:"json"})})})},_disableDownloadLinks:function(){var c=this;var d=c.element.find("a.entry_action_download:not(.recaptcha), a.entry_action_export:not(.recaptcha), a.entry_link:not(.recaptcha), a.entry_action_view:not(.recaptcha), a.entry_action_external_view:not(.recaptcha)");if(d.length===0){return}b.each(d,function(){var f=b(this).attr("href");var e=b(this).attr("download");b(this).attr("href","javascript:void(0)").attr("href-action",f);b(this).removeAttr("download").attr("download-action",e);b(this).addClass("recaptcha")})},_enableDownloadLinks:function(){var c=this;var d=b("a.entry_action_download.recaptcha, a.entry_action_export.recaptcha, a.entry_link.recaptcha, a.entry_action_view.recaptcha, a.entry_action_external_view.recaptcha");if(d.length===0){return}b.each(d,function(){b(this).attr("href",b(this).attr("href-action")).attr("download",b(this).attr("download-action"));b(this).removeClass("recaptcha")})},_positionScrollToTop:function(c){clearTimeout(window.scrollTimer);window.scrollTimer=setTimeout(function(){b(".ajax-filelist").each(function(){var k=b(this);var i=k.next(".scroll-to-top");var h=k.height();var g=k.offset();var f=g.top+h;var d=b(window).scrollTop();var e=d+b(window).height();if(d>g.top&&h>b(window).height()){i.show().fadeIn(40);var j=h;if(f>e){j=e-g.top-30}i.stop().animate({top:Math.round(j-50)})}else{i.fadeOut(400)}})},50)},_initMove:function(){var c=this;if(this.element.find(".moveable").length===0){return false}this.element.find(".moveable").draggable({stack:".moveable",cursor:"move",cursorAt:{top:10,left:10},containment:c.element,helper:"clone",distance:10,delay:50,start:function(d,e){b(this).addClass("isdragged")},stop:function(d,e){setTimeout(function(){b(this).removeClass("isdragged")},300)}});this.element.find(".folder, .image-folder").droppable({accept:c.element.find(".moveable"),activeClass:"ui-state-hover",hoverClass:"ui-state-active",tolerance:"pointer",drop:function(d,e){c._actionMoveEntry(e.draggable,b(this))}})},_initLinkEvent:function(){var c=this;c.element.find(".entry_linkto").unbind("click").click(function(j){var h=b(this).parent().attr("data-name");var f=b(this).parent().attr("data-id");var g=c.element.attr("data-account-id");var d=b(".useyourdrive .thickbox_opener").find("[data-user-id]").attr("data-user-id");var i=b(".thickbox_opener");if(i.hasClass("private-folders-auto")){i.find(".private-folders-auto-current").val(h);i.find(".private-folders-auto-input-account").val(g);i.find(".private-folders-auto-input-id").val(f);i.find(".private-folders-auto-input-name").val(h);i.find(".private-folders-auto-button").removeClass("disabled").find(".uyd-spinner").fadeOut();tb_remove();j.stopPropagation();return true}if(i.hasClass("woocommerce_upload_location")){b("#woocommerce_useyourdrive-woocommerce_upload_location_id").val(f);b("#woocommerce_useyourdrive-woocommerce_upload_location").val(h);tb_remove();j.stopPropagation();return true}b.ajax({type:"POST",url:c.options.ajax_url,data:{action:"useyourdrive-linkusertofolder",account_id:g,id:f,text:h,userid:d,_ajax_nonce:c.options.createlink_nonce},beforeSend:function(){tb_remove();b(".useyourdrive .thickbox_opener").find(".uyd-spinner").show()},complete:function(){b(".uyd-spinner").hide()},success:function(e){if(e==="1"){b(".useyourdrive .thickbox_opener").parent().find(".column-private_folder").text(h);b(".useyourdrive .thickbox_opener .unlinkbutton").removeClass("hidden");b(".useyourdrive .thickbox_opener .linkbutton").addClass("hidden");b(".useyourdrive .thickbox_opener").removeClass("thickbox_opener")}else{location.reload(true)}},dataType:"text"});j.stopPropagation();return true});c.element.find(".entry_woocommerce_link").unbind("click").click(function(g){var f=b(this).closest(".entry").attr("data-id");var h=b(this).closest(".entry").attr("data-name");var d=c.element.attr("data-account-id");tb_remove();window.wc_useyourdrive.afterFileSelected(f,h,d);g.stopPropagation();return true})},_initEditMenu:function(){var c=this;c.element.find(" .entry .entry_edit_menu").each(function(){b(this).click(function(d){d.stopPropagation()});b(this).qtip({content:{text:b(this).next(".uyd-dropdown-menu")},position:{my:"top center",at:"bottom center",target:b(this),scroll:false,viewport:c.element},show:{event:"click",solo:true},hide:{event:"mouseleave unfocus",delay:200,fixed:true},events:{show:function(e,d){d.elements.target.closest(".entry").addClass("hasfocus").addClass("popupopen")},hide:function(e,d){d.elements.target.closest(".entry").removeClass("hasfocus").removeClass("popupopen")}},style:{classes:"UseyourDrive "+c.options.content_skin}})});c.element.find(".entry_action_view").unbind("click").click(function(){c._actionPreviewEntry(b(this))});c.element.find(".entry_action_download").unbind("click").click(function(d){d.stopPropagation();return c._actionDownloadEntry(b(this))});c.element.find(".entry_action_export").unbind("click").click(function(d){d.stopPropagation();return c._actionExportEntry(d,b(this))});c.element.find(".entry_action_shortlink").unbind("click").click(function(d){c._actionShareEntry(b(this))});c.element.find(".entry_action_delete").unbind("click").click(function(g){var f=b(this).closest("ul").attr("data-id");c.element.find(".entry[data-id='"+f+"'] .selected-files:checkbox").prop("checked",true);var d=c.element.find("input[name='selected-files[]']:checked");c._actionDeleteEntries(d)});c.element.find(".entry_action_move").unbind("click").click(function(g){var f=b(this).closest("ul").attr("data-id");c.element.find(".entry[data-id='"+f+"'] .selected-files:checkbox").prop("checked",true);var d=c.element.find("input[name='selected-files[]']:checked");c._actionMoveEntries(d)});c.element.find(".entry_action_rename").unbind("click").click(function(d){c._actionRenameEntry(b(this))});c.element.find(".entry_action_description").unbind("click").click(function(d){c._actionEditDescriptionEntry(d,b(this))})},_initDescriptionBox:function(){var c=this;c.element.find(".entry .entry_description").each(function(){b(this).click(function(d){d.stopPropagation()});b(this).qtip({content:{text:b(this).next(".description_textbox")},position:{my:"top center",at:"bottom center",target:b(this),scroll:false,viewport:c.element},show:{delay:200,solo:true},hide:{event:"mouseleave unfocus",delay:200,fixed:true},events:{show:function(e,d){d.elements.target.closest(".entry").addClass("hasfocus").addClass("popupopen")},hide:function(f,e){if(e.elements.content.find(".description_textarea").length>0){var d=e.elements.content.find(".description_textarea").val().replace(/\r\n|\r|\n/g,"<br />");var g=b("<div>").addClass("description_text");g.html(d);e.elements.content.find(".description_textarea").replaceWith(g);e.elements.content.find("input[type=button]").remove();e.elements.content.find(".ajaxprocess").remove();e.elements.content.find(".entry_action_description").show()}e.elements.target.closest(".entry").removeClass("hasfocus").removeClass("popupopen")}},style:{classes:"UseyourDrive description "+c.options.content_skin}})})},renderBreadCrumb:function(){var c=this;var d=c.element.find(".breadcrumb");d.asBreadcrumbs("destroy");d.asBreadcrumbs({namespace:"uyd",toggleIconClass:"fas fa-caret-down",dropdownMenuClass:"uyd-dropdown-menu",dropdownItem:function e(h,g,f){if(!f){return('<li class="'+h.dropdownItemClass+" "+h.dropdownItemDisableClass+'"><a href="#"><i class="fas fa-folder fa-lg"></i>  '+g+"</a></li>")}return('<li class="'+h.dropdownItemClass+'"><a href="'+f+'"><i class="fas fa-folder fa-lg"></i>  '+g+"</a></li>")}});d.find(".uyd-dropdown-menu li").click(function(){d.find('li a.folder[href="'+b(this).find("a").attr("href")+'"]').trigger("click");d.find(".uyd-dropdown").removeClass("open")});d.find(".uyd-toggle").click(function(){d.find(".uyd-dropdown").addClass("open")});b(document).mouseup(function(g){var f=d.find(".uyd-dropdown-menu");if(!f.is(g.target)&&f.has(g.target).length===0){f.parent().removeClass("open")}})},renderThumbnailsPopup:function(){var c=this;c.element.find(".entry[data-tooltip] .entry_name, .entry[data-tooltip] .entry_lastedit").each(function(){b(this).qtip({suppress:true,content:{text:function(f,e){var d=b(this).parent().find(".description_textbox").clone();d.find("img.preloading").removeClass("hidden").unveil(200,null,function(){b(this).load(function(){b(this).removeClass("preloading").removeAttr("data-src");b(this).prev(".preloading").remove()})}).trigger("unveil");return d}},position:{target:"mouse",adjust:{x:5,y:5,scroll:false},viewport:c.element},show:{delay:500,solo:true},hide:{event:"click mouseleave unfocus"},style:{classes:"UseyourDrive description "+c.options.content_skin}})})},unveilImages:function(){var c=this;c.element.find("img.preloading").one("error",function(){if(typeof b(this).attr("data-src-backup")!==typeof undefined&&b(this).attr("data-src-backup")!==false){this.src=b(this).attr("data-src-backup")}else{this.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}b(this).removeAttr("data-src");b(this).prev(".preloading").remove()});c.element.find("img.preloading").not(".hidden").unveil(200,null,function(){b(this).load(function(){b(this).removeClass("preloading").removeAttr("data-src");b(this).prev(".preloading").remove()})});setTimeout(function(){},200)},renderNavMenu:function(){var c=this;this._initSearchBox();this._initGearMenu();this._initAccountSelector();this.element.find(".nav-refresh").unbind("click");this.element.find(".nav-refresh").click(function(){c.clearSearchBox();c.options.forceRefresh=true;c._getFileList({})});this.element.find(".nav-home").unbind("click");this.element.find(".nav-home").click(function(){c.clearSearchBox();c.element.attr("data-id",c.element.attr("data-org-id")).attr("data-path","");c._getFileList({lastFolder:c.element.attr("data-org-id")})});c.element.find(".sortable").click(function(){var e="asc";if(b(this).hasClass("asc")){e="desc"}c.element.find(".sortable").removeClass("asc").removeClass("desc");b(this).addClass(e);var d=b(this).attr("data-sortname")+":"+e;c.element.attr("data-sort",d);c._getFileList({})})},_initLightbox:function(){var c=this;var e=(c.element.attr("data-lightboxnav")==="1");var d={skin:this.options.lightbox_skin,path:this.options.lightbox_path,maxScale:1,minScale:0.05,slideshow:{pauseOnHover:true,pauseTime:c.element.attr("data-pausetime"),startPaused:((c.element.attr("data-list")==="gallery")&&(c.element.attr("data-slideshow")==="1"))?false:true},controls:{slideshow:(c.element.attr("data-list")==="gallery"&&e)?true:false,arrows:(e)?true:false,thumbnail:(c.options.mobile?false:true)},caption:{start:(c.options.lightbox_showcaption==="mouseenter")?true:false,show:c.options.lightbox_showcaption,hide:(c.options.lightbox_showcaption==="mouseenter")?"mouseleave":c.options.lightbox_showcaption,},keepAspectRatio:true,callback:{onBeforeLoad:function(i,g){b(".ilightbox-holder").addClass("UseyourDrive");b(".ilightbox-holder .uyd-hidepopout").remove();var h=b(".ilightbox-holder").find("iframe").addClass("uyd-embedded");if(c.element.attr("data-popout")==="0"){b(".ilightbox-holder").find(".uyd-embedded").after('<div class="uyd-hidepopout">&nbsp;</div>')}c._helperIframeFix(h)},onBeforeChange:function(){var g=b(".ilightbox-holder video, .ilightbox-holder audio");b.each(g,function(j,h){if(h.paused===false){h.pause()}})},onAfterChange:function(h){var g=h.currentElement.find("video, audio");b.each(g,function(k,j){if(j.paused){j.play()}})},onRender:function(i,g){var h=b(".ilightbox-holder").find("video, audio");b.each(h,function(k,j){var l=b(this);j.addEventListener("playing",function(){var n=i.currentElement.find(".ilightbox-container").width()-1;var m=i.currentElement.find(".ilightbox-container").height()-1;l.width(n);l.parent().width(n);if(l.height()>i.currentElement.find(".ilightbox-container").height()-2){l.height(m)}},false);l.find("source").attr("src",l.find("source").attr("data-src"))})},onShow:function(k){if(k.currentElement.find(".empty_iframe").length===0){k.currentElement.find(".uyd-embedded").after(c.options.str_iframe_loggedin)}if(k.currentElement.find("iframe").length>0){setTimeout(function(){k.currentElement.find(".uyd-embedded").width(k.currentElement.find(".ilightbox-container").width()-1)},500);k.currentElement.find("iframe").on("load",function(){k.currentElement.find(".empty_iframe").remove()})}k.currentElement.find(".empty_iframe").hide();if(k.currentElement.find("img").length===0){setTimeout(function(){k.currentElement.find(".empty_iframe").fadeIn();k.currentElement.find(".empty_iframe_link").attr("href",k.currentElement.find("iframe").attr("src"))},5000)}var j=k.currentElement.find("video, audio");b.each(j,function(m,l){if(l.paused){l.play()}});var h=this;b(".ilightbox-thumbnail img.preloading").unveil(null,null,function(){b(this).load(function(){b(this).removeClass("preloading").removeAttr("data-src");b(this).prev(".preloading").remove();b(this).parent().data({naturalWidth:this.width,naturalHeight:this.height});h.positionThumbnails(null,null,null);b(".ilightbox-thumbnail img.preloading").unveil()})});b(".ilightbox-container .uyd-hidepopout").on("contextmenu",function(l){return false});b(".ilightbox-container .ilightbox-wrapper, .ilightbox-container img, .ilightbox-container video, .ilightbox-container audio").on("contextmenu",function(l){return(c.options.lightbox_rightclick==="Yes")});if(c.options.mobile){b(".ilightbox-container img").panzoom({disablePan:true,minScale:1,contain:"invert"});b(".ilightbox-container img").on("panzoomzoom",function(m,l,n){if(n==1){l.options.disablePan=true}else{l.options.disablePan=false}})}var i=k.currentElement.find("img");if(i.length>0&&i.data("logged")!==1&&(i.attr("src").indexOf("action=useyourdrive-")===-1)){var g=b('a[href="'+i.attr("src")+'"]').closest("[data-id]").data("id");i.data("logged",1);c._logEvent("log_preview_event",g)}}},errors:{loadImage:c.options.str_imgError_title,loadContents:c.options.str_xhrError_title},text:{next:c.options.str_next_title,previous:c.options.str_previous_title,slideShow:c.options.str_startslideshow}};if(e){if(!b.isEmptyObject(this.lightBox)){c.lightBox.destroy()}var f=c.element.find(".ilightbox-group");c.lightBox=f.iLightBox(d)}else{if(!b.isEmptyObject(this.lightBox)){b.each(this.lightBox,function(){this.destroy()})}c.lightBox=[];c.element.find(".ilightbox-group").each(function(){c.lightBox.push(b(this).iLightBox(d))})}},createUrlDeepLink:function(d){var c={shortcode_id:this.options.listtoken,request:null};var e=Base64.encode(encodeURIComponent(JSON.stringify(c)));return window.location.href.split("#").shift()+"#"+e},_logEvent:function(d,e){var c=this;if(c.options.log_events==="0"){return false}b.ajax({type:"POST",url:c.options.ajax_url,data:{action:"useyourdrive-event-stats",account_id:c.options.account_id,type:d,id:e,_ajax_nonce:c.options.log_nonce}})},_actionPreviewEntry:function(f){var d=this;b(".qtip").qtip("hide");var c=f.closest("ul").attr("data-id");var e=d.element.find(".entry[data-id='"+c+"']").find(".entry_link")[0].click()},_actionDownloadEntry:function(f){var d=this;var e=f.attr("data-filename");sendDriveGooglePageView("Download",e);var c=f.closest("ul").attr("data-id");if(typeof c==="undefined"){c=f.closest(".entry").attr("data-id")}var g=b('<div><i class="fas fa-cog fa-spin fa-1x fa-fw"></i></div>').css({"margin-right":"5px",display:"inline-grid"}).delay(5000).fadeOut("slow",function(){b(this).remove()});d.element.find(".layout-grid .entry[data-id='"+c+"'] .entry-name-view").prepend(g);d.element.find(".layout-list .entry[data-id='"+c+"'] .entry_name").prepend(g);setTimeout(function(){b(".qtip").qtip("hide");return true},300);return true},_actionExportEntry:function(g,f){var d=this;var c=f.attr("href");var e=f.attr("data-filename");sendDriveGooglePageView("Export",e);setTimeout(function(){b(".qtip").qtip("hide");return true},300);return true},_actionShareEntry:function(j){var m=this;b(".qtip").qtip("hide");var l=m.element.attr("data-account-id");var f=j.closest("ul").attr("data-id");var k=m.element.find(".entry[data-id='"+f+"']").attr("data-name");if(j.hasClass("entry_action_shortlink_folder")){var f=m.element.attr("data-id")}b("#useyourdrive-modal-action").remove();var i="";i+='<button class="button useyourdrive-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+m.options.str_close_title+'" >'+m.options.str_close_title+"</button>";i+='<button class="button useyourdrive-modal-confirm-btn" data-action="confirm" type="button" title="'+m.options.str_create_shared_link+'" >'+m.options.str_create_shared_link+"</button>";var d=b('<a tabindex="0" class="close-button" title="'+m.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>');var h=b('<div class="useyourdrive-modal-body" tabindex="0" ></div>');var g=b('<div class="useyourdrive-modal-footer"><div class="useyourdrive-modal-buttons">'+i+"</div></div>");var e=b('<div id="useyourdrive-modal-action" class="UseyourDrive useyourdrive-modal '+m.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');b("body").append(e);b("#useyourdrive-modal-action .modal-content").append(d,h,g);b.ajax({type:"POST",url:m.options.ajax_url,data:{action:"useyourdrive-create-link",account_id:l,listtoken:m.options.listtoken,id:f,_ajax_nonce:m.options.createlink_nonce},complete:function(){b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").remove()},success:function(n){if(n!==null){if(n.link!==null){b(".useyourdrive-modal-body").append('<input type="text" class="shared-link-url" value="'+n.link+'" style="width: 98%;" readonly/><div class="useyourdrive-shared-social"></div>');sendDriveGooglePageView("Create shared link");b.extend(jsSocials.shares,{directlink:{label:"Copy",logo:"fas fa-clipboard",shareIn:"self",shareUrl:function(){return"#"},countUrl:""}});b(".useyourdrive-shared-social").jsSocials({url:n.link,text:k+" | ",showLabel:false,showCount:"inside",shareIn:"popup",shares:["directlink","email","twitter","facebook","googleplus","linkedin","pinterest","whatsapp"]});var o=new ClipboardJS(".jssocials-share-directlink",{text:function(p){return b(".shared-link-url").val()}});o.on("success",function(p){b(".jssocials-share-directlink i").removeClass("fa-copy").addClass("fa-clipboard-check");p.clearSelection()});o.on("error",function(p){if(m.options.mobile){b(".shared-link-url").select()}else{window.prompt("Copy to clipboard: Ctrl+C, Enter",b(".shared-link-url").val())}})}else{b(".useyourdrive-modal-body").find(".shared-link-url").val(n.error)}}},dataType:"json"});var c=new RModal(document.getElementById("useyourdrive-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:true});document.addEventListener("keydown",function(n){c.keydown(n)},false);c.open();window.modal_action=c;b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").prop("disabled",true);b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+m.options.str_processing+"</span>");return false},_actionCreateEntry:function(j){var k=this;b(".qtip").qtip("hide");b("#useyourdrive-modal-action").remove();var i="";i+='<button class="button useyourdrive-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+k.options.str_cancel_title+'" >'+k.options.str_cancel_title+"</button>";i+='<button class="button useyourdrive-modal-confirm-btn" data-action="rename" type="button" title="'+k.options.str_addfolder_title+'" >'+k.options.str_addfolder_title+"</button>";var h='<input type="text" id="useyourdrive-modal-addfolder-input" name="useyourdrive-modal-addfolder-input" value="" style="width:100%"/>';var d=b('<a tabindex="0" class="close-button" title="'+k.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>');var g=b('<div class="useyourdrive-modal-body" tabindex="0" >'+k.options.str_addfolder+" <br/>"+h+"</div>");var f=b('<div class="useyourdrive-modal-footer"><div class="useyourdrive-modal-buttons">'+i+"</div></div>");var e=b('<div id="useyourdrive-modal-action" class="UseyourDrive useyourdrive-modal '+k.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');b("body").append(e);b("#useyourdrive-modal-action .modal-content").append(d,g,f);b("#useyourdrive-modal-action #useyourdrive-modal-addfolder-input").unbind("keyup");b("#useyourdrive-modal-action #useyourdrive-modal-addfolder-input").on("keyup",function(l){if(l.which==13||l.keyCode==13){b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").trigger("click")}});b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").unbind("click");b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").click(function(){var m=b("#useyourdrive-modal-addfolder-input").val();if(/[<>:"/\\|?*]/g.test(b("#useyourdrive-modal-addfolder-input").val())){b("#useyourdrive-modal-action .useyourdrive-modal-error").remove();b("#useyourdrive-modal-addfolder-input").after('<div class="useyourdrive-modal-error">'+k.options.str_rename_failed+"</div>");b("#useyourdrive-modal-action .useyourdrive-modal-error").fadeIn()}else{var l={action:"useyourdrive-add-folder",newfolder:encodeURIComponent(m),_ajax_nonce:k.options.addfolder_nonce};k._actionDoModifyEntry(l);b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").prop("disabled",true);b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+k.options.str_processing+"</span>")}});var c=new RModal(document.getElementById("useyourdrive-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:true});document.addEventListener("keydown",function(l){c.keydown(l)},false);c.open();window.modal_action=c;return false},_actionRenameEntry:function(k){var m=this;b(".qtip").qtip("hide");var f=k.closest("ul").attr("data-id");var l=m.element.find(".entry[data-id='"+f+"']").attr("data-name");b("#useyourdrive-modal-action").remove();var j="";j+='<button class="button useyourdrive-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+m.options.str_cancel_title+'" >'+m.options.str_cancel_title+"</button>";j+='<button class="button useyourdrive-modal-confirm-btn" data-action="rename" type="button" title="'+m.options.str_rename_title+'" >'+m.options.str_rename_title+"</button>";var i='<input id="useyourdrive-modal-rename-input" name="useyourdrive-modal-rename-input" type="text" value="'+l+'" style="width:100%"/>';var d=b('<a tabindex="0" class="close-button" title="'+m.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>');var h=b('<div class="useyourdrive-modal-body" tabindex="0" >'+m.options.str_rename+"<br/>"+i+"</div>");var g=b('<div class="useyourdrive-modal-footer"><div class="useyourdrive-modal-buttons">'+j+"</div></div>");var e=b('<div id="useyourdrive-modal-action" class="UseyourDrive useyourdrive-modal '+m.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');b("body").append(e);b("#useyourdrive-modal-action .modal-content").append(d,h,g);b("#useyourdrive-modal-action #useyourdrive-modal-rename-input").unbind("keyup");b("#useyourdrive-modal-action #useyourdrive-modal-rename-input").on("keyup",function(n){if(n.which==13||n.keyCode==13){b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").trigger("click")}});b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").unbind("click");b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").click(function(){var o=b("#useyourdrive-modal-rename-input").val();if(/[<>:"/\\|?*]/g.test(b("#useyourdrive-modal-rename-input").val())){b("#useyourdrive-modal-action .useyourdrive-modal-error").remove();b("#useyourdrive-modal-rename-input").after('<div class="useyourdrive-modal-error">'+m.options.str_rename_failed+"</div>");b("#useyourdrive-modal-action .useyourdrive-modal-error").fadeIn()}else{var n={action:"useyourdrive-rename-entry",id:f,newname:encodeURIComponent(o),_ajax_nonce:m.options.rename_nonce};m._actionDoModifyEntry(n);b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").prop("disabled",true);b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+m.options.str_processing+"</span>")}});var c=new RModal(document.getElementById("useyourdrive-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:true});document.addEventListener("keydown",function(n){c.keydown(n)},false);c.open();window.modal_action=c;return false},_actionEditDescriptionEntry:function(c,h){var l=this;var e=h.attr("data-id");var k=l.element.attr("data-account-id");var i=h.closest(".UseyourDrive").find(".description_text");var g=i.html();var j=b("<textarea />").addClass("description_textarea");j.val(g.replace(/<br\s?\/?>/g,"\n"));i.replaceWith(j);var f=b('<img src="'+l.options.plugin_url+'/css/images/wpspin_light-2x.gif" width="16" height="16" />').addClass("ajaxprocess").hide();var d=b('<input type="button" class="button" value="'+l.options.str_save_title+'"/>');j.after(f).after(d);j.focus();h.hide();d.click(function(){var m=j.val();var n=b("<div>").addClass("description_text");b.ajax({type:"POST",url:l.options.ajax_url,data:{action:"useyourdrive-edit-description-entry",account_id:k,id:e,newdescription:encodeURIComponent(m),listtoken:l.options.listtoken,_ajax_nonce:l.options.description_nonce},beforeSend:function(){d.prop("disabled",true).fadeTo(400,0.3);f.show()},complete:function(){h.show();d.remove();f.remove()},error:function(){n.html(g);j.replaceWith(n)},success:function(o){if(o!==null){if(typeof o.description!=="undefined"){m=o.description;n.html(m.replace(/\r\n|\r|\n/g,"<br />"));j.replaceWith(n);return}}n.html(g);j.replaceWith(n)},dataType:"json"})});return false},_actionMoveEntry:function(e,c){var d=self.element.attr("data-account-id");var f={action:"useyourdrive-move-entries",account_id:d,entries:[e.attr("data-id")],copy:false,target:c.attr("data-id"),_ajax_nonce:this.options.move_nonce};this._actionDoModifyEntry(f)},_actionMoveEntries:function(j){b(".qtip").qtip("hide");b("#useyourdrive-modal-action").remove();var l=this,f="",e=[];b.each(j,function(){e.push(b(this).val())});var k="";k+='<button class="button useyourdrive-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+l.options.str_cancel_title+'" >'+l.options.str_cancel_title+"</button>";k+='<button class="button useyourdrive-modal-confirm-btn" data-action="confirm" type="button" title="'+l.options.str_move_title+'" >'+l.options.str_move_title+" ("+e.length+")</button>";var d=b('<a tabindex="0" class="close-button" title="'+l.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>');var i=b('<div class="useyourdrive-modal-body" tabindex="0" ><div id="useyourdrive-modal-folder-selector"></div></div>');var h=b('<div class="useyourdrive-modal-footer"><div class="useyourdrive-modal-buttons">'+k+"</div></div>");var g=b('<div id="useyourdrive-modal-action" class="UseyourDrive useyourdrive-modal '+l.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');b("body").append(g);b("#useyourdrive-modal-action .modal-content").append(d,i,h);l.options.topContainer.clone().appendTo("#useyourdrive-modal-folder-selector").removeClass("gallery").addClass("files");b("#useyourdrive-modal-folder-selector").find(".ajax-filelist").html("");b("#useyourdrive-modal-folder-selector .UseyourDrive").attr("data-list","files").attr("data-layout","list").UseyourDrive(UseyourDrive_vars);b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").unbind("click");b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").click(function(){var m={action:"useyourdrive-move-entries",entries:e,copy:false,target:b("#useyourdrive-modal-folder-selector .UseyourDrive").attr("data-id"),_ajax_nonce:l.options.move_nonce};l._actionDoModifyEntry(m);b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").prop("disabled",true);b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+l.options.str_processing+"</span>")});var c=new RModal(document.getElementById("useyourdrive-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:true});document.addEventListener("keydown",function(m){c.keydown(m)},false);c.open();window.modal_action=c;return false},_actionDeleteEntries:function(j){b(".qtip").qtip("hide");b("#useyourdrive-modal-action").remove();var l=this,f="",e=[];b.each(j,function(){var n=b(this).closest(".entry");var o=n.find("img:first()");var m=b('<div class="useyourdrive-modal-file-icon">');if(o.length>0){o.clone().appendTo(m)}f+="<li>"+m.html()+"<span>"+n.attr("data-name")+"</span></li>";e.push(b(this).val())});var k="";k+='<button class="button useyourdrive-modal-cancel-btn secondary" data-action="cancel" type="button" onclick="modal_action.close();" title="'+l.options.str_cancel_title+'" >'+l.options.str_cancel_title+"</button>";k+='<button class="button useyourdrive-modal-confirm-btn" data-action="confirm" type="button" title="'+l.options.str_delete_title+'" >'+l.options.str_delete_title+" ("+e.length+") </button>";var d=b('<a tabindex="0" class="close-button" title="'+l.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>');var i=b('<div class="useyourdrive-modal-body" tabindex="0" >'+l.options.str_delete+'</br></br><ul class="files">'+f+"</ul></div>");var h=b('<div class="useyourdrive-modal-footer"><div class="useyourdrive-modal-buttons">'+k+"</div></div>");var g=b('<div id="useyourdrive-modal-action" class="UseyourDrive useyourdrive-modal '+l.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');b("body").append(g);b("#useyourdrive-modal-action .modal-content").append(d,i,h);b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").unbind("click");b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").click(function(){var m={action:"useyourdrive-delete-entries",entries:e,_ajax_nonce:l.options.delete_nonce};l._actionDoModifyEntry(m);b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").prop("disabled",true);b("#useyourdrive-modal-action .useyourdrive-modal-confirm-btn").html('<i class="fas fa-cog fa-spin fa-fw"></i><span> '+l.options.str_processing+"</span>")});var c=new RModal(document.getElementById("useyourdrive-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:true});document.addEventListener("keydown",function(m){c.keydown(m)},false);c.open();window.modal_action=c;return false},_actionSelectAccount:function(){b(".qtip").qtip("hide");b("#useyourdrive-modal-action").remove();var d=this;var e=b('<a tabindex="0" class="close-button" title="'+d.options.str_close_title+'" onclick="modal_action.close();"><i class="fas fa-times fa-lg" aria-hidden="true"></i></a></div>');var f=b('<div class="useyourdrive-modal-body modal-account-selector" tabindex="0" style="text-align: center;"><h1>'+d.options.str_account_title+'</h1><div class="nav-account-selector-content">'+d.element.find(".nav-account-selector-content").html()+"</div></div>");var g=b('<div id="useyourdrive-modal-action" class="UseyourDrive useyourdrive-modal '+d.options.content_skin+'"><div class="modal-dialog"><div class="modal-content"></div></div></div>');b("body").append(g);b("#useyourdrive-modal-action .modal-content").append(e,f);b("#useyourdrive-modal-action .nav-account-selector").unbind("click");b("#useyourdrive-modal-action .nav-account-selector").click(function(){d.element.find(".nav-account-selector:first").html(b(this).html());d.element.attr("data-id","");d.element.attr("data-path","");d.element.attr("data-account-id",b(this).attr("data-account-id"));d.options.account_id=b(this).attr("data-account-id");d._getFileList({});c.close()});var c=new RModal(document.getElementById("useyourdrive-modal-action"),{dialogOpenClass:"animated slideInDown",dialogCloseClass:"animated slideOutUp",escapeClose:true});document.addEventListener("keydown",function(h){c.keydown(h)},false);c.open();window.modal_action=c;return false},_actionDoModifyEntry:function(e){var d=this;var c=d.element.attr("data-id");e.listtoken=this.options.listtoken;e.lastFolder=c;e.account_id=d.element.attr("data-account-id");b.ajax({type:"POST",url:d.options.ajax_url,data:e,beforeSend:function(){d.options.loadingContainer.fadeIn(400)},success:function(f){if(typeof f!=="undefined"){if(typeof f.lastFolder!=="undefined"&&(f.lastFolder!==null)){d.element.attr("data-id",f.lastFolder)}}},complete:function(){if(typeof modal_action!=="undefined"){modal_action.close()}d.options.forceRefresh=true;d._getFileList({})},dataType:"json"})},_uploadValidateFile:function(h,d){var f=this;var e=f.element.find('input[name="minfilesize"]').val();var i=f.element.find('input[name="maxfilesize"]').val();var g=new RegExp(f.element.find('input[name="acceptfiletypes"]').val(),"i");h.error=false;if(h.name.length&&!g.test(h.name)){h.error=f.options.acceptFileTypes}if(e!==""&&h.size<=e){h.error=f.options.minFileSize}if(i!==""&&h.size>0&&h.size>i){h.error=f.options.maxFileSize}if(f.number_of_uploaded_files.Max>0&&(f.number_of_uploaded_files.Counter>f.number_of_uploaded_files.Max)){var c=true;b.each(f.uploaded_files_storage,function(){if(this.name===h.name){c=false;f.number_of_uploaded_files.Counter--}});if(c){h.error=f.options.maxNumberOfFiles}}return h},_uploadGetProgress:function(d){var c=this;b.ajax({type:"POST",url:c.options.ajax_url,data:{action:"useyourdrive-upload-file",account_id:c.element.attr("data-account-id"),type:"get-status",listtoken:c.options.listtoken,hash:d.hash,_ajax_nonce:c.options.upload_nonce},dataType:"json",success:function(e){if(e!==null){if(typeof e.status!=="undefined"){if(e.status.progress==="starting"||e.status.progress==="uploading"){setTimeout(function(){c._uploadGetProgress(e.file)},1500)}c._uploadRenderRowOnProgress(e.file,{percentage:50+(e.status.percentage/2),progress:e.status.progress})}else{d.error=c.options.str_error;c._uploadRenderRowOnFinish(d)}}},error:function(e){d.error=c.options.str_error;c._uploadRenderRowOnFinish(d)}})},_uploadRenderRow:function(e){var c=this;var f=c.element.find(".template-row").clone().removeClass("template-row");var d=b('<a class="cancel-upload"><i class="fas fa-ban" aria-hidden="true"></i> '+c.options.str_delete_title+"</a>");f.attr("data-file",e.name).attr("data-id",e.hash);f.find(".file-name").text(e.path.replace(e.name,"")+e.name);if(e.size!=="undefined"&&e.size>0){f.find(".file-size").text(c._helperFormatBytes(e.size,1))}f.find(".upload-thumbnail img").attr("src",c._uploadGetThumbnail(e));f.addClass("template-upload");f.find(".upload-status").removeClass().addClass("upload-status queue").append(d);f.find(".upload-status-icon").removeClass().addClass("upload-status-icon fas fa-circle").hide();c.element.find(".fileupload-list .files").append(f);c.element.find("div.fileupload-drag-drop").fadeOut();if(typeof e.error!=="undefined"&&e.error!==false){c._uploadRenderRowOnFinish(e,"invalid_file")}return f},_uploadRenderRowOnStart:function(d){var c=this;var e=c.element.find(".fileupload-list [data-id='"+d.hash+"']");e.find(".upload-status").removeClass().addClass("upload-status succes").text(c.options.str_uploading_local);e.find(".upload-status-icon").removeClass().addClass("upload-status-icon fas fa-circle-notch fa-spin").fadeIn();e.find(".upload-progress").slideDown()},_uploadRenderRowOnProgress:function(f,d){var e=this;var h=e.element.find(".fileupload-list [data-id='"+f.hash+"']");var g=h.find(".ui-progressbar");var c=g.find(".ui-progressbar-value");c.fadeIn().animate({width:(d.percentage/100)*g.width()},50);if(d.progress==="uploading_to_cloud"){h.find(".upload-status").text(e.options.str_uploading_cloud)}},_uploadRenderRowOnFinish:function(d,e){var c=this;var f=c.element.find(".fileupload-list [data-id='"+d.hash+"']");f.addClass("template-download").removeClass("template-upload");f.find(".file-name").text(d.path.replace(d.name,"")+d.name);f.find(".upload-thumbnail img").attr("src",c._uploadGetThumbnail(d));f.find(".upload-progress").slideUp();if(typeof d.error!=="undefined"&&d.error!==false){f.find(".upload-error").html('<i class="fas fa-exclamation-circle"></i> <strong>'+c.options.str_error+":</strong> "+d.error).slideUp().delay(500).slideDown()}else{f.find(".upload-status").removeClass().addClass("upload-status succes").text(c.options.str_success);f.find(".upload-status-icon").removeClass().addClass("upload-status-icon fas fa-check-circle");c.uploaded_files.push(d.fileid)}if(typeof e==="undefined"&&c.element.find(".template-upload").length<1){clearTimeout(c.uploadPostProcessTimer);c.uploadPostProcessTimer=setTimeout(function(){c._uploadDoPostProcess()},500)}if(f.closest(".gform_wrapper").length>0||f.closest(".wpcf7").length>0||(c.element.hasClass("upload")===true)){}else{c._uploadDeleteRow(d,5000)}},_uploadDeleteRow:function(e,d){var c=this;var f=c.element.find(".fileupload-list [data-id='"+e.hash+"']");f.delay(d).animate({opacity:"0"},"slow",function(){b(this).remove();if(c.element.find(".template-upload").length<1){c.element.find("div.fileupload-drag-drop").fadeIn()}});if(typeof e.error!=="undefined"&&e.error!==false){c.number_of_uploaded_files.Counter--}},_uploadDoRequest:function(d){var c=this;if(b.active===0){d.submit()}else{window.setTimeout(function(){c._uploadDoRequest(d)},200)}},_uploadDoConvert:function(d){var c=this;var e=c.element.find(".fileupload-list [data-id='"+d.hash+"']");b.ajax({type:"POST",url:UseyourDrive_vars.ajax_url,data:{action:"useyourdrive-upload-file",account_id:c.element.attr("data-account-id"),type:"upload-convert",listtoken:c.options.listtoken,fileid:d.fileid,convert:d.convert,_ajax_nonce:c.options.upload_nonce},success:function(f){if(f!==null){if(typeof f.result==="undefined"||f.result===0){d.error=c.options.str_error}else{d.fileid=f.fileid}}else{d.error=c.options.str_error}},error:function(f){d.error=c.options.str_error},complete:function(f){c._uploadRenderRowOnFinish(d)},dataType:"json"})},_uploadDoPostProcess:function(){var c=this;b.ajax({type:"POST",url:c.options.ajax_url,data:{action:"useyourdrive-upload-file",account_id:c.element.attr("data-account-id"),type:"upload-postprocess",listtoken:c.options.listtoken,files:c.uploaded_files,lastFolder:c.element.attr("data-id"),_ajax_nonce:c.options.upload_nonce},success:function(d){if(d!==null){c.uploaded_files=[];b.each(d.files,function(f,e){c.uploaded_files_storage[f]={hash:f,name:e.name,type:e.type,path:e.completepath,size:e.filesize,link:e.link,account_id:e.account_id,folderurl:e.folderurl,}});c.element.find(".fileupload-filelist").val(JSON.stringify(c.uploaded_files_storage)).trigger("change")}},complete:function(d){if(c.element.hasClass("upload")===false){c.options.clearLocalCache=true;clearTimeout(c.updateTimer);c._getFileList({})}if(c.element.find(".fileupload-list").find(".template-upload").length<1){window.onbeforeunload=null;c.element.find(".fileuploadform").trigger("useyourdrive-upload-finished")}},dataType:"json"})},_uploadGetThumbnail:function(d){var c=this;var f=c.options.icons_set;if(typeof d.thumbnail==="undefined"||d.thumbnail===null||d.thumbnail===""){var e;if(typeof d.type==="undefined"||d.type===null){e="icon_11_generic_xl128"}else{if(d.type.indexOf("word")>=0){e="icon_11_word_xl128"}else{if(d.type.indexOf("excel")>=0||d.type.indexOf("spreadsheet")>=0){e="icon_11_excel_xl128"}else{if(d.type.indexOf("powerpoint")>=0||d.type.indexOf("presentation")>=0){e="icon_11_powerpoint_xl128"}else{if(d.type.indexOf("image")>=0){e="icon_11_image_xl128"}else{if(d.type.indexOf("audio")>=0){e="icon_11_audio_xl128"}else{if(d.type.indexOf("video")>=0){e="icon_11_video_xl128"}else{if(d.type.indexOf("pdf")>=0){e="icon_11_pdf_xl128"}else{if(d.type.indexOf("text")>=0){e="icon_11_text_xl128"}else{e="icon_11_generic_xl128"}}}}}}}}}return f+e+".png"}else{return d.thumbnail}},_initDragDrop:function(){var c=this;b(document).bind("dragover",function(h){var i=c.element,g=window.dropZoneTimeout;if(!g){i.addClass("in")}else{clearTimeout(g)}var f=false,d=h.target;do{if(b(d).is(i)){f=true;break}d=d.parentNode}while(d!==null);if(f){b(d).addClass("hover")}else{i.removeClass("hover")}window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null;i.removeClass("in hover")},100)});b(document).bind("drop dragover",function(d){d.preventDefault()})},_initResizeHandler:function(){var c=this;c._orgininal_width=c.element.width();b(window).resize(function(){if(c._orgininal_width===c.element.width()){return}c._orgininal_width=c.element.width();c._refreshView()})},_refreshView:function(){var c=this;if(typeof c.resizeTimer!=="undefined"){clearTimeout(c.resizeTimer)}c.element.find(".image-collage").fadeTo(100,0);c.element.find(".layout-grid").fadeTo(100,0);c.resizeTimer=setTimeout(function(){if(c.options.topContainer.hasClass("files")||c.options.topContainer.hasClass("search")){c.renderContentForBrowser()}if(c.options.topContainer.hasClass("gallery")){c.renderContentForGallery()}},100)},_pipeline:function(e){var c=this;var d=b.extend({url:c.options.ajax_url,data:null,method:"POST"},e);return function(i,l,h){var k=d.data(i);b.extend(i,k);var f=(i.listtoken+i._ajax_nonce+(typeof i.account_id==="undefined"?"":i.account_id)+i.filelayout+(typeof i.id==="undefined"?i.lastFolder:i.id)+i.sort+i.query);var j="CloudPlugin_"+f.hashCode();if(c.options.clearLocalCache){c._cacheRemove("all");c.options.clearLocalCache=false}if(c.options.forceRefresh){c._cacheRemove("all");i.hardrefresh=true;c.options.forceRefresh=false}if(c._cacheGet(j)!==null){var g=c._cacheGet(j);if(g===Object(g)){g.draw=i.draw;l(c,g);return true}else{c._cacheRemove(j)}}if(typeof h.jqXHR!=="undefined"&&h.jqXHR!==null){h.jqXHR.abort()}h.jqXHR=b.ajax({type:d.method,url:d.url,data:i,dataType:"json",cache:false,beforeSend:function(){},success:function(m){if(m===Object(m)){c.element.trigger("ajax-success",[m,i,h.jqXHR]);c._cacheSet(j,m);l(c,m)}else{c.element.trigger("ajax-error",[m,i,h.jqXHR]);l(c,false);return false}},error:function(m){c.element.trigger("ajax-error",[m,i,h.jqXHR]);l(c,false);return false}})}},_initCache:function(){var c=this;c._isCacheStorageAvailable=c._cacheStorageAvailable();setInterval(function(){c._cacheRemove("all")},1000*60*15)},_cacheStorageAvailable:function(){try{var f=window.sessionStorage,c="__storage_test__";f.setItem(c,c);f.removeItem(c);return true}catch(d){return d instanceof DOMException&&(d.code===22||d.code===1014||d.name==="QuotaExceededError"||d.name==="NS_ERROR_DOM_QUOTA_REACHED")&&f.length!==0}},_cacheGet:function(d){if(typeof this.cache.expires==="undefined"){var c=new Date();c.setMinutes(c.getMinutes()+15);this.cache.expires=c}if(this.cache.expires.getTime()<new Date().getTime()){this._cacheRemove(d)}if(this._isCacheStorageAvailable){return JSON.parse(sessionStorage.getItem(d))}else{if(typeof this.cache[d]==="undefined"){return null}return this.cache[d]}},_cacheSet:function(c,d){if(this._isCacheStorageAvailable){try{sessionStorage.setItem(c,JSON.stringify(d))}catch(f){this._cacheRemove("all");return false}}else{if(typeof this.cache[c]==="undefined"){this.cache[c]={}}this.cache[c]=d}},_cacheRemove:function(d){if(this._isCacheStorageAvailable){if(d==="all"){var c=sessionStorage.length;while(c--){var d=sessionStorage.key(c);if(/CloudPlugin/.test(d)){sessionStorage.removeItem(d)}}}else{sessionStorage.removeItem(d)}}else{if(d==="all"){delete this.cache}else{delete this.cache[d]}}},_helperDownloadUrlInline:function(c){var e="hiddenDownloader";var d=document.getElementById(e);if(d===null){d=document.createElement("iframe");d.id=e;d.style.display="none";document.body.appendChild(d)}d.src=c},_helperFormatBytes:function(d,c){if(d==0){return""}var f=1000;var e=c+1||3;var h=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];var g=Math.floor(Math.log(d)/Math.log(f));return parseFloat((d/Math.pow(f,g)).toFixed(e))+" "+h[g]},_helperIframeFix:function(c){if(/iPhone|iPod|iPad/.test(navigator.userAgent)){c.each(function(){if(b(this).closest("#safari_fix").length===0){b(this).wrap(function(){return b('<div id="safari_fix"/>').css({width:"100%",height:"100%",overflow:"auto","z-index":"2","-webkit-overflow-scrolling":"touch"})})}})}},_helperCachedScript:function(d,c){c=jQuery.extend(c||{},{dataType:"script",cache:true,url:d});return jQuery.ajax(c)},_helperReadArrCheckBoxes:function(d){var c=b(d+":checked").map(function(){return this.value}).get();return c},_helperIsIE:function(){var c=navigator.userAgent.toLowerCase();return(c.indexOf("msie")!=-1)?parseInt(c.split("msie")[1]):false}});var a=b({});b.ajaxQueue=function(d){var c=d.complete;a.queue(function(e){d.complete=function(){if(c){c.apply(this,arguments)}e()};b.ajax(d)})}})(jQuery);(function(a){a(".UseyourDrive").UseyourDrive(UseyourDrive_vars)})(jQuery);var wpcp_playlists={};function sendDriveGooglePageView(b,a){if(UseyourDrive_vars.google_analytics==="1"){if(typeof ga!=="undefined"&&ga!==null){ga("send","event","Use-your-Drive",b,a)}if(typeof _gaq!=="undefined"&&_gaq!==null){_gaq.push(["_trackEvent","Use-your-Drive",b,a])}if(typeof gtag!=="undefined"&&gtag!==null){gtag("event",b,{event_category:"Use-your-Drive",event_label:a,value:a})}}};