
var iaa_selectionMode=false;var iaa_elementShow=false;var iaa_started=false;var iaa_isClosing=false;var iaa_pastInteractions=new Array();var iaa_talkTimer=false;var iaa_previewMode=false;iaa_data=iaa_data[0];jQuery.urlParam=function(a){var b=new RegExp("[?&]"+a+"=([^&#]*)").exec(window.location.href);if(b==null){return null}else{return b[1]||0}};function iaa_isIframe(){try{return window.self!==window.top}catch(a){return true}}jQuery(document).ready(function(){if(sessionStorage.iaa_interactions){iaa_pastInteractions=jQuery.parseJSON(sessionStorage.iaa_interactions)}});jQuery(window).load(function(){jQuery.each(iaa_data.steps,function(){this.content=jQuery.parseJSON(this.content)});jQuery.each(iaa_data.links,function(){this.conditions=jQuery.parseJSON(this.conditions)});if(iaa_data.settings.disableMobile==1&&jQuery(window).width()<=480){}else{if(!iaa_isIframe()||document.referrer.indexOf("wp-admin")<0){if(iaa_elementShow!=""&&iaa_elementShow.length>0){iaa_showElement(iaa_elementShow)}iaa_initAssistant()}jQuery("*").click(function(a){if(iaa_selectionMode){if(jQuery(this).children().length==0||jQuery(this).is("a")||jQuery(this).is("button")||jQuery(this).is("img")||jQuery(this).is("select")){a.preventDefault();jQuery(".iaa_selectedDom").removeClass("iaa_selectedDom");jQuery(this).addClass("iaa_selectedDom");window.parent.iaa_confirmSelectElement(this);iaa_selectionMode=false}}});jQuery(window).resize(function(){if(jQuery(".creative_banner[data-id] .cbb_aiAssistant").length>0){$assistant=jQuery("#iaa_avatarPreviewContainer");$assistant.children("div:not(#iaa_talkBubble)").hide();$assistant.children("img").hide();$assistant.css({position:"absolute",top:jQuery(".creative_banner[data-id] .cbb_aiAssistant").offset().top,left:jQuery(".creative_banner[data-id] .cbb_aiAssistant").offset().left+jQuery(".creative_banner[data-id] .cbb_aiAssistant").width()/2,width:0,marginLeft:0,height:jQuery(".creative_banner[data-id] .cbb_aiAssistant").height()});$assistant.find("#iaa_talkBubble").css({bottom:jQuery(".creative_banner[data-id] .cbb_aiAssistant").height()+20})}})}});function iaa_startOnStep(b){var a=0;jQuery.each(iaa_data.steps,function(){if(this.content.title==b){a=this.id}});if(a>0){sessionStorage.iaa_step=a;sessionStorage.iaa_closed=0;jQuery("#iaa_avatarPreviewContainer").animate({bottom:0},500);jQuery("#iaa_talkBubble").fadeIn();iaa_initAssistant()}}function iaa_repositionMouth(){jQuery(".iaa_avatarContainer img.iaa_avatar_mouth").css({top:iaa_data.settings.avatarMouthY+"px",visibility:"hidden",display:"block"});jQuery(".iaa_avatarContainer img.iaa_avatar_mouth").css({marginLeft:(0-jQuery(".iaa_avatarContainer img.iaa_avatar_mouth").outerWidth()/2)+"px"});jQuery(".iaa_avatarContainer img.iaa_avatar_mouth").css({display:"",visibility:"visible"})}function iaa_initAssistant(){if(sessionStorage.iaa_closed!=1){if(jQuery("#iaa_avatarPreviewContainer").length>0){jQuery("#iaa_avatarPreviewContainer").remove()}var a=jQuery('<div id="iaa_avatarPreviewContainer" class="iaa_avatarContainer"></div>');if(iaa_data.settings.avatar_head==1){a.addClass("iaa_genderF")}a.html('<div class="iaa_avatar_corpse" data-num="'+iaa_data.settings.avatar_corpse+'" data-type="corpse"></div><div class="iaa_avatar_head" data-num="'+iaa_data.settings.avatar_head+'" data-type="head" ></div><div class="iaa_avatar_mouth" data-num="1" data-type="mouth" ></div><div class="iaa_avatar_eyes" data-num="'+iaa_data.settings.avatar_eyes+'" data-type="eyes"></div><div class="iaa_avatar_hair" data-num="'+iaa_data.settings.avatar_hair+'" data-type="hair" ></div>');if(iaa_data.settings.positionScreen==1){a.addClass("iaa_right")}else{a.removeClass("iaa_right")}jQuery("body").append(a);if(iaa_data.settings.avatarType==1){jQuery(".iaa_avatarContainer").addClass("iaa_customAvatar");if(iaa_data.settings.avatarWidth>0){jQuery(".iaa_avatarContainer").css({width:iaa_data.settings.avatarWidth+"px",height:iaa_data.settings.avatarHeight+"px"})}jQuery(".iaa_avatarContainer").append('<img class="iaa_avatar_img" style="width:'+iaa_data.settings.avatarWidth+"px;height:"+iaa_data.settings.avatarHeight+'px ;" src="'+iaa_data.settings.avatarImg+'" />');jQuery(".iaa_avatarContainer").append('<img class="iaa_avatar_mouth" onload="iaa_repositionMouth();" style="left:'+iaa_data.settings.avatarWidth/2+"px; width: auto; margin-left: -"+iaa_data.settings.avatarMouthWidth/2+'px;" src="'+iaa_data.settings.avatarTalkImg+'" />')}a.append('<div id="iaa_talkBubble"><a href="javascript:" class="iaa_bubbleCloseBtn"><span class="glyphicon glyphicon-remove"></span> </a></div>');a.find("#iaa_talkBubble").css({bottom:parseInt(a.css("height"))+13});a.find(".iaa_bubbleCloseBtn").click(iaa_closeAssistant);if(sessionStorage.iaa_step&&sessionStorage.iaa_step>0){iaa_loadStep(sessionStorage.iaa_step)}else{sessionStorage.iaa_step=0;var b=0;jQuery.each(iaa_data.steps,function(){if(this.content.start==1){b=this.id}});iaa_loadStep(0);a.attr("data-originid",b)}a.click(function(){var c=0;jQuery.each(iaa_data.steps,function(){if(this.content.start==1){c=this.id}});if(!iaa_isClosing){if(sessionStorage.iaa_step==0){iaa_loadStep(c)}else{if(sessionStorage.iaa_step=="undefined"){iaa_loadStep(c)}}}});if(jQuery(".creative_banner[data-id] .cbb_aiAssistant").length>0){a.addClass("iaa_cbbActive");jQuery(".creative_banner[data-id] .cbb_aiAssistant").css("cursor","pointer");jQuery(".creative_banner[data-id] .cbb_aiAssistant").click(function(){jQuery("#iaa_avatarPreviewContainer").trigger("click")});a.children("div:not(#iaa_talkBubble)").hide();a.children("img").hide();a.css({position:"absolute",top:jQuery(".creative_banner[data-id] .cbb_aiAssistant").offset().top,left:jQuery(".creative_banner[data-id] .cbb_aiAssistant").offset().left+jQuery(".creative_banner[data-id] .cbb_aiAssistant").width()/2,width:0,marginLeft:0,height:jQuery(".creative_banner[data-id] .cbb_aiAssistant").height()});a.find("#iaa_talkBubble").css({bottom:jQuery(".creative_banner[data-id] .cbb_aiAssistant").height()+20})}}}function iaa_stepBtnClick(c){var d=new Array();jQuery.each(iaa_data.links,function(){if(this.originID==sessionStorage.iaa_step&&this.destinationID>0){d.push(this)}});var a=0;var b=false;jQuery.each(d,function(){var e=this;if(e.conditions&&e.conditions.length>0){jQuery.each(e.conditions,function(){var j=this;var l="";var t="";var n=0;var s=0;var p="button";var u=j.interaction.substr(0,j.interaction.indexOf("_"));var f=j.interaction.substr(j.interaction.indexOf("_")+1,j.interaction.length);var g=jQuery('[data-id="'+f+'"]');if(u==sessionStorage.iaa_step&&jQuery('[data-id="'+f+'"]').length>0){l=g.attr("data-validation");p=g.attr("data-type");t=g.find("input,select,textarea").val();n=g.find('input[type="number"]').attr("min");s=g.find('input[type="number"]').attr("max")}else{var k=iaa_getBackupInteraction(u,f);l=k.validation;p=k.type;t=k.value;n=k.min;s=k.max}g.removeClass("iaa_error");if(g.is('[data-validation="fill"]')&&!iaa_isFieldValid(l,p,t)){g.addClass("iaa_error")}switch(j.action){case"clicked":if(jQuery('a[data-id="'+f+'"]').length>0&&jQuery(c).attr("data-id")!=f){d=jQuery.grep(d,function(m){return m!=e})}else{if(jQuery('a[data-id="'+f+'"]').length==0&&(!k||k.value!="clicked")){d=jQuery.grep(d,function(m){return m!=e})}else{b=true}}break;case"filled":if(!iaa_isFieldValid(l,p,t,n,s)){g.addClass("iaa_error");d=jQuery.grep(d,function(m){return m!=e})}else{b=true}break;case"equal":if(j.interaction=="_page"){if(document.location.href==j.value||document.location.href+"/"==j.value||document.location.href==j.value+"/"){b=true}else{d=jQuery.grep(d,function(m){return m!=e})}}else{if(t!=j.value){d=jQuery.grep(d,function(m){return m!=e})}else{b=true}}break;case"superior":if(j.interaction=="_date"){var i=new Date();var r=i.getFullYear();var h=i.getMonth()+1;var o=i.getDate();if(h<10){h="0"+h}if(o<10){o="0"+o}i=r+"-"+h+"-"+o;i=i.replace("-","");i=i.replace("-","");var q=j.value.replace("-","");q=q.replace("-","");if(i<q){d=jQuery.grep(d,function(m){return m!=e})}else{b=true}}else{if(parseFloat(t)<parseFloat(j.value)){d=jQuery.grep(d,function(m){return m!=e})}}break;case"inferior":if(j.interaction=="_date"){var i=new Date();var r=i.getFullYear();var h=i.getMonth()+1;var o=i.getDate();if(h<10){h="0"+h}if(o<10){o="0"+o}i=r+"-"+h+"-"+o;i=i.replace("-","");i=i.replace("-","");var q=j.value.replace("-","");q=q.replace("-","");if(i>q){d=jQuery.grep(d,function(m){return m!=e})}else{b=true}}else{if(parseFloat(t)>parseFloat(j.value)){d=jQuery.grep(d,function(m){return m!=e})}else{b=true}}break;default:if(!j.action||j.action.substr(0,2)!="v_"||t!=j.action.substr(2,j.action.length)){d=jQuery.grep(d,function(m){return m!=e})}else{b=true}break}})}});if(b){jQuery.each(d,function(){var e=this;if(!e.conditions||e.conditions.length==0){d=jQuery.grep(d,function(f){return f!=e})}})}if(d.length>0&&jQuery("#iaa_talkBubble .iaa_error").length==0){sessionStorage.iaa_step_done=0;iaa_backupInteractions(c);iaa_loadStep(d[0].destinationID)}else{if(jQuery("#iaa_talkBubble .iaa_error").length==0){iaa_closeAssistant()}}}function iaa_getBackupInteraction(c,b){var a=false;if(sessionStorage.iaa_interactions){iaa_pastInteractions=jQuery.parseJSON(sessionStorage.iaa_interactions)}jQuery.each(iaa_pastInteractions,function(){var d=this;if(c==0||d.stepID==c){jQuery.each(d.interactions,function(){if(this.itemID==b){a=this}})}});return a}function iaa_backupInteractions(a){var b=new Array();jQuery(".iaa_talkInteraction .iaa_field").each(function(){sessionStorage.iaa_dialog+="<p>"+jQuery(this).children("label").html()+" : <strong>"+jQuery(this).children("input,select,textarea").val()+"</strong></p>";b.push({itemID:jQuery(this).attr("data-id"),validation:jQuery(this).attr("data-validation"),type:jQuery(this).attr("data-type"),value:jQuery(this).children("input,select,textarea").val(),min:jQuery(this).attr("min"),max:jQuery(this).attr("max")})});b.push({itemID:jQuery(a).attr("data-id"),type:"button",value:"clicked"});sessionStorage.iaa_dialog+="<p>"+iaa_data.txt_btnClicked+" : <strong>"+jQuery(a).html()+"</strong></p>";iaa_pastInteractions.push({stepID:sessionStorage.iaa_step,interactions:b});sessionStorage.iaa_interactions=JSON.stringify(iaa_pastInteractions)}function iaa_isFieldValid(b,d,f,c,a){var e=true;switch(b){case"fill":if(f.length==0||f==0){e=false}if(d=="numberfield"&&parseFloat(c)>0&&parseFloat(f)<parseFloat(c)){e=false}if(d=="numberfield"&&parseFloat(a)>0&&parseFloat(f)>parseFloat(a)){e=false}break;case"email":if(!iaa_checkEmail(f)){e=false}break}return e}function iaa_checkEmail(a){if(a.indexOf("@")!="-1"&&a.indexOf(".")!="-1"&&a!=""){return true}else{return false}}function iaa_closeAssistant(){iaa_isClosing=true;iaa_pastInteractions=new Array();sessionStorage.iaa_dialog="";sessionStorage.iaa_interactions="";sessionStorage.iaa_step_done="";setTimeout(function(){iaa_isClosing=false;if(iaa_data.settings.disableIntro==0){if(sessionStorage.iaa_step==0){jQuery("#iaa_talkBubble").fadeOut(250);if(iaa_data.settings.hideOnClose==1){sessionStorage.iaa_closed=1;jQuery("#iaa_avatarPreviewContainer").animate({bottom:-200},500)}}else{sessionStorage.iaa_step=0;iaa_initAssistant()}}else{sessionStorage.iaa_step=0;jQuery("#iaa_talkBubble").fadeOut(250);if(iaa_data.settings.hideOnClose==1){sessionStorage.iaa_closed=1;jQuery("#iaa_avatarPreviewContainer").animate({bottom:-200},500)}}},250)}function iaa_checkFields(){jQuery('#iaa_talkBubble #iaa_bubbleContent input[type="number"]').keydown(function(a){if(jQuery(this).is('[step="any"]')){if(jQuery.inArray(a.keyCode,[46,8,9,27,13,110,190])!==-1||(a.keyCode==65&&a.ctrlKey===true)||a.keyCode==46||a.keyCode==8||a.keyCode==190||(a.keyCode>=35&&a.keyCode<=40)){return}if((a.shiftKey||(a.keyCode<48||a.keyCode>57))&&(a.keyCode<96||a.keyCode>105)){a.preventDefault()}}else{if(jQuery.inArray(a.keyCode,[9,27,13])!==-1||(a.keyCode==65&&a.ctrlKey===true)||(a.keyCode>=35&&a.keyCode<=40)){return}if((a.shiftKey||(a.keyCode<48||a.keyCode>57))&&(a.keyCode<96||a.keyCode>105)){a.preventDefault()}}})}function iaa_say(a){jQuery("#iaa_avatarPreviewContainer").attr("data-talk","1");setTimeout(function(){jQuery("#iaa_avatarPreviewContainer").attr("data-talk","0")},3000);jQuery("#iaa_talkBubble").removeClass("iaa_open");jQuery("#iaa_talkBubble").fadeOut(250);setTimeout(function(){jQuery("#iaa_talkBubble").html("");jQuery("#iaa_talkBubble").html('<a href="javascript:" class="iaa_bubbleCloseBtn"><span class="glyphicon glyphicon-remove"></span> </a>');jQuery(".iaa_bubbleCloseBtn").hover(function(){jQuery(this).addClass("iaa_hover")},function(){jQuery(this).removeClass("iaa_hover")});jQuery(".iaa_bubbleCloseBtn").click(iaa_closeAssistant);jQuery("#iaa_talkBubble").css({width:a.bubbleWidth,height:a.bubbleHeight,maxWidth:jQuery(window).width()-(jQuery("#iaa_talkBubble").offset().left+20),maxHeight:jQuery(window).height()-jQuery("#iaa_talkBubble").offset().bottom});if(a.text||a.interactions){a.text=a.text.replace(/\[b\]/g,"<strong>").replace(/\[\/b\]/g,"</strong>");a.text=a.text.replace(/\[u\]/g,"<u>").replace(/\[\/u\]/g,"</u>");a.text=a.text.replace(/\r?\n/g,"<br/>");var c=a.text;if(a.text.indexOf("[interaction")>-1){var g=a.text.substr(a.text.indexOf("[interaction")+13,a.text.indexOf("]",a.text.indexOf("[interaction")));g.replace(" ","");g=g.substr(g.indexOf("'")+1,g.lastIndexOf("'")-(g.indexOf("'")+1));var b=iaa_getBackupInteraction(0,g);var f=a.text.substr(0,a.text.indexOf("[interaction"));var d=a.text.substr(a.text.indexOf("]",a.text.indexOf("[interaction"))+1,a.text.length);c=f+b.value+d}var h="";var e="";jQuery("#iaa_talkBubble").append('<div id="iaa_bubbleContent"><div class="iaa_talkText"><p>'+c+"</p></div></div>");jQuery.each(a.interactions,function(){var k=this;switch(k.type){case"button":e+='<a href="javascript:" class="iaa_btn" onclick="iaa_stepBtnClick(this);" data-id="'+k.itemID+'">'+k.label+"</a>";break;case"textfield":h+='<div class="iaa_field" data-type="textfield" data-id="'+k.itemID+'" data-validation="'+k.validation+'"><label>'+k.label+'</label><input type="text" data-valisation="'+k.validation+'" /></div>';break;case"numberfield":var l="";if(k.decimals==1){l='step="any"'}h+='<div class="iaa_field" data-type="numberfield" data-id="'+k.itemID+'" data-validation="'+k.validation+'"><label>'+k.label+'</label><input type="number" '+l+' value="'+k.min+'" min="'+k.min+'" max="'+k.max+'"  /></div>';break;case"select":var j=new Array();var i="<select>";jQuery.each(k,function(m){if(m.substr(0,2)=="s_"){if(this!=""){j.push(this);i+='<option value="'+this+'">'+this+"</option>"}}});i+="</select>";h+='<div class="iaa_field" data-type="select" data-id="'+k.itemID+'"><label>'+k.label+"</label>"+i+"</div>";break}});h+='<p class="iaa_btns">'+e+"</p>";jQuery("#iaa_talkBubble #iaa_bubbleContent").append('<div class="iaa_talkInteraction">'+h+"</div>")}else{if(typeof(a)=="string"&&a.length>0){a=a.replace(/\[b\]/g,"<strong>").replace(/\[\/b\]/g,"</strong>");a=a.replace(/\[u\]/g,"<u>").replace(/\[\/u\]/g,"</u>");a=a.replace(/\r?\n/g,"<br/>");jQuery("#iaa_talkBubble").append('<div id="iaa_bubbleContent"><div class="iaa_talkText"><p>'+a+"</p></div></div>")}}if(a.title){sessionStorage.iaa_dialog+="<h2>"+a.title+"</h2>";sessionStorage.iaa_dialog+="<p>"+c+"</p>"}if((jQuery("#iaa_talkBubble .iaa_talkText p").length>0&&jQuery("#iaa_talkBubble .iaa_talkText p").html().length>0)||(jQuery("#iaa_talkBubble .iaa_talkInteraction").length>0&&jQuery("#iaa_talkBubble .iaa_talkInteraction").html().length>0)){if(jQuery(".creative_banner[data-id] .cbb_aiAssistant").length>0){jQuery("#iaa_talkBubble").css({opacity:0,display:"block"});jQuery("#iaa_talkBubble").css({left:0-jQuery("#iaa_talkBubble").width()/2,opacity:1});jQuery("#iaa_talkBubble").hide()}jQuery("#iaa_talkBubble").fadeIn(250);iaa_talk()}setTimeout(function(){if(jQuery("#iaa_bubbleContent").length>0&&jQuery("#iaa_bubbleContent")[0].scrollHeight>jQuery("#iaa_talkBubble").height()){jQuery("#iaa_talkBubble").css({paddingRight:6});jQuery(".iaa_bubbleCloseBtn").css({marginRight:2});jQuery("#iaa_bubbleContent").css({paddingRight:4})}else{jQuery("#iaa_talkBubble").css({paddingRight:18});jQuery(".iaa_bubbleCloseBtn").css({marginRight:-12});jQuery("#iaa_bubbleContent").css({paddingRight:0})}},250);iaa_checkFields();jQuery("#iaa_talkBubble").addClass("iaa_open")},400)}function iaa_loadStep(c){jQuery(".iaa_selectedDom").removeClass("iaa_selectedDom");sessionStorage.iaa_step=c;if(c>0){var a=iaa_getStepByID(c);if(!a){iaa_loadStep(0)}else{iaa_initActions(a)}}else{sessionStorage.iaa_interactions="[]";sessionStorage.iaa_step_done=0;sessionStorage.iaa_redir=0;sessionStorage.iaa_dialog="";if(iaa_data.settings.disableIntro==1){var b=0;jQuery.each(iaa_data.steps,function(){if(this.content.start==1){b=this.id}});iaa_loadStep(b)}else{iaa_say(iaa_data.settings.initialText)}jQuery("#iaa_talkBubble").css("height","auto")}}function iaa_getStepByID(b){var a=false;jQuery.each(iaa_data.steps,function(){if(this.id==b){a=this}});return a}function iaa_initActions(step){sessionStorage.iaa_step_done=0;if(step.content.actions.length==0){iaa_say(step.content)}jQuery.each(step.content.actions,function(){var action=this;jQuery.each(action,function(key){eval("action."+key+" = action."+key+".replace(/\\[g\\]/g,'\"');")});switch(action.type){case"sendEmail":jQuery.ajax({url:iaa_data.ajaxurl,type:"post",data:{action:"iaa_sendDialogEmail",dialog:sessionStorage.iaa_dialog,sendTo:action.email,subject:action.subject}});iaa_say(step.content);break;case"changeUrl":if(!sessionStorage.iaa_redir||sessionStorage.iaa_redir!=step.id){sessionStorage.iaa_redir=step.id;var currentUrl=document.location.href;if(document.location.href.indexOf("iaa_action")>0){currentUrl=document.location.href.substr(0,document.location.href.indexOf("iaa_action"))}if(currentUrl!=action.url&&action.url+"/"!=currentUrl&&currentUrl+"/"!=action.url){var website=iaa_data.siteUrl;website=website.replace("http://","");website=website.replace("https://","");website=website.replace("www.","");if(action.url.indexOf(website)<0){sessionStorage.iaa_step=0}if(action.url.indexOf("[LANG]")>-1){if(iaa_data.wmplDef==iaa_data.wpmlLang){iaa_data.wpmlLang=""}action.url=action.url.replace(/[LANG]/g,iaa_data.wpmlLang)}if(document.location.href.indexOf("iaa_action=preview")>-1){if(action.url.indexOf("?")>0){document.location.href=action.url+"&iaa_action=preview"}else{document.location.href=action.url+"?iaa_action=preview"}}else{document.location.href=action.url}}else{iaa_say(step.content)}}else{var currentUrl=document.location.href;if(document.location.href.indexOf("iaa_action")>0){currentUrl=document.location.href.substr(0,document.location.href.indexOf("iaa_action")-1)}if(currentUrl!=action.url&&action.url+"/"!=currentUrl&&currentUrl+"/"!=action.url){sessionStorage.iaa_step=0;iaa_closeAssistant()}else{iaa_say(step.content)}}break;case"executeJS":iaa_say(step.content);action.executeJS=action.executeJS.replace(/\|g\|/g,'"');eval(action.executeJS);break;case"showElement":if(document.location.href!=action.url&&action.url+"/"!=document.location.href&&document.location.href+"/"!=action.url){var website=iaa_data.siteUrl;website=website.replace("http://","");website=website.replace("https://","");website=website.replace("www.","");if(action.url.indexOf(website)<0){sessionStorage.iaa_step=0}if(action.url.indexOf("[LANG]")>-1){if(iaa_data.wmplDef==iaa_data.wpmlLang){iaa_data.wpmlLang=""}action.url=action.url.replace(/[LANG]/g,iaa_data.wpmlLang)}if(!sessionStorage.iaa_redir||sessionStorage.iaa_redir!=step.id){sessionStorage.iaa_redir=step.id;document.location.href=action.url}}else{iaa_showElement(action.element);iaa_say(step.content)}break;case"sendInteractions":iaa_say(step.content);jQuery.ajax({url:action.url,type:"post",action:{interactions:iaa_pastInteractions}});break;default:iaa_say(step.content);break}});sessionStorage.iaa_step_done=1}function iaa_startSelection(){iaa_selectionMode=true}function iaa_showElement(b,a){if(jQuery(b).length>0){jQuery(b).addClass("iaa_selectedDom");if(iaa_isAnyParentFixed(jQuery(b))){jQuery("html,body").animate({scrollTop:jQuery(b).position().top-200},500)}else{jQuery("html,body").animate({scrollTop:jQuery(b).offset().top-200},500)}}}function iaa_isAnyParentFixed(a,b){if(!b){var b=false}try{if(a.parent().length>0&&a.parent().css("position")=="fixed"){b=true}}catch(c){}if(!b&&a.parent().length>0){b=iaa_isAnyParentFixed(a.parent(),b)}return b}function iaa_talk(){if(!iaa_talkTimer){iaa_talkTimer=setInterval(function(){iaa_talk()},200)}if(jQuery("#iaa_avatarPreviewContainer").attr("data-talk")=="1"){if(jQuery("#iaa_avatarPreviewContainer .iaa_avatar_mouth").is(".iaa_talk")){jQuery("#iaa_avatarPreviewContainer .iaa_avatar_mouth").removeClass("iaa_talk")}else{jQuery("#iaa_avatarPreviewContainer .iaa_avatar_mouth").addClass("iaa_talk")}}else{jQuery("#iaa_avatarPreviewContainer .iaa_avatar_mouth").removeClass("iaa_talk");if(iaa_talkTimer){clearInterval(iaa_talkTimer);iaa_talkTimer=false}}};